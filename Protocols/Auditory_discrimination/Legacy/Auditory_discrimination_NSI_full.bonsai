<?xml version="1.0" encoding="utf-8"?>
<WorkflowBuilder Version="2.6.3"
                 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                 xmlns:cv="clr-namespace:Bonsai.Vision;assembly=Bonsai.Vision"
                 xmlns:harp="clr-namespace:Bonsai.Harp;assembly=Bonsai.Harp"
                 xmlns:rx="clr-namespace:Bonsai.Reactive;assembly=Bonsai.Core"
                 xmlns:p1="clr-namespace:Bonsai.Harp.CF;assembly=Bonsai.Harp.CF"
                 xmlns:dsp="clr-namespace:Bonsai.Dsp;assembly=Bonsai.Dsp"
                 xmlns:wie="clr-namespace:Bonsai.Windows.Input;assembly=Bonsai.Windows.Input"
                 xmlns:al="clr-namespace:Bonsai.Audio;assembly=Bonsai.Audio"
                 xmlns:res="clr-namespace:Bonsai.Resources;assembly=Bonsai.System"
                 xmlns:scr="clr-namespace:Bonsai.Scripting;assembly=Bonsai.Scripting"
                 xmlns:num="clr-namespace:Bonsai.Numerics;assembly=Bonsai.Numerics"
                 xmlns:p2="clr-namespace:Bonsai.Numerics.Distributions;assembly=Bonsai.Numerics"
                 xmlns:gl="clr-namespace:Bonsai.Shaders;assembly=Bonsai.Shaders"
                 xmlns:gli="clr-namespace:Bonsai.Shaders.Input;assembly=Bonsai.Shaders"
                 xmlns:io="clr-namespace:Bonsai.IO;assembly=Bonsai.System"
                 xmlns="https://bonsai-rx.org/2018/workflow">
  <Workflow>
    <Nodes>
      <Expression xsi:type="Combinator">
        <Combinator xsi:type="cv:CameraCapture">
          <cv:Index>0</cv:Index>
          <cv:CaptureProperties />
        </Combinator>
      </Expression>
      <Expression xsi:type="GroupWorkflow">
        <Name>HarpBeh</Name>
        <Description>Workflows to connect and interact with Harp Behaviour Module

Will initialise device and create subjects:

BehModuleInput -- Messagebytes -- output from devicecommand node to issue outputs to harp board

BehBytes -- bytesarray -- messagebytes output to be written to .bin file with MatrixWriter node

BeamXbool -- bool -- readout  for hi/lo state of photogate/lickspout connected to ethernet breakout ports
</Description>
        <Workflow>
          <Nodes>
            <Expression xsi:type="Disable">
              <Builder xsi:type="Combinator">
                <Combinator xsi:type="BooleanProperty">
                  <Value>false</Value>
                </Combinator>
              </Builder>
            </Expression>
            <Expression xsi:type="Disable">
              <Builder xsi:type="BehaviorSubject">
                <Name>Beam0Bool</Name>
              </Builder>
            </Expression>
            <Expression xsi:type="Disable">
              <Builder xsi:type="BehaviorSubject">
                <Name>Beam1Bool</Name>
              </Builder>
            </Expression>
            <Expression xsi:type="Disable">
              <Builder xsi:type="BehaviorSubject">
                <Name>Beam2Bool</Name>
              </Builder>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="BooleanProperty">
                <Value>false</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="harp:Format">
              <harp:MessageType>Write</harp:MessageType>
              <harp:Address>32</harp:Address>
              <harp:PayloadType>U8</harp:PayloadType>
            </Expression>
            <Expression xsi:type="BehaviorSubject">
              <Name>BehModule</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="ByteProperty">
                <Value>0</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:ToArray" />
            </Expression>
            <Expression xsi:type="BehaviorSubject">
              <Name>BehBytes</Name>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>BehModule</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:Skip">
                <rx:Count>1</rx:Count>
              </Combinator>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="harp:Device">
                <harp:DeviceState>Active</harp:DeviceState>
                <harp:DumpRegisters>true</harp:DumpRegisters>
                <harp:LedState>On</harp:LedState>
                <harp:VisualIndicators>On</harp:VisualIndicators>
                <harp:Heartbeat>Disable</harp:Heartbeat>
                <harp:IgnoreErrors>false</harp:IgnoreErrors>
                <harp:PortName>COM4</harp:PortName>
              </Combinator>
            </Expression>
            <Expression xsi:type="Disable">
              <Builder xsi:type="SubscribeSubject">
                <Name>Emulate</Name>
              </Builder>
            </Expression>
            <Expression xsi:type="Disable">
              <Builder xsi:type="Equal">
                <Operand xsi:type="BooleanProperty">
                  <Value>false</Value>
                </Operand>
              </Builder>
            </Expression>
            <Expression xsi:type="Disable">
              <Builder xsi:type="Condition">
                <Workflow>
                  <Nodes>
                    <Expression xsi:type="WorkflowInput">
                      <Name>Source1</Name>
                    </Expression>
                    <Expression xsi:type="WorkflowOutput" />
                  </Nodes>
                  <Edges>
                    <Edge From="0" To="1" Label="Source1" />
                  </Edges>
                </Workflow>
              </Builder>
            </Expression>
            <Expression xsi:type="Disable">
              <Builder xsi:type="Combinator">
                <Combinator xsi:type="rx:SubscribeWhen" />
              </Builder>
            </Expression>
            <Expression xsi:type="p1:BehaviorEvent">
              <p1:Type>Input</p1:Type>
              <p1:Mask>Poke0InfraRedBeam</p1:Mask>
            </Expression>
            <Expression xsi:type="BehaviorSubject">
              <Name>Beam0Bool</Name>
            </Expression>
            <Expression xsi:type="p1:BehaviorEvent">
              <p1:Type>Input</p1:Type>
              <p1:Mask>Poke1InfraRedBeam</p1:Mask>
            </Expression>
            <Expression xsi:type="BehaviorSubject">
              <Name>Beam1Bool</Name>
            </Expression>
            <Expression xsi:type="p1:BehaviorEvent">
              <p1:Type>Input</p1:Type>
              <p1:Mask>Poke2InfraRedBeam</p1:Mask>
            </Expression>
            <Expression xsi:type="BehaviorSubject">
              <Name>Beam2Bool</Name>
            </Expression>
            <Expression xsi:type="MemberSelector">
              <Selector>MessageBytes</Selector>
            </Expression>
            <Expression xsi:type="MulticastSubject">
              <Name>BehBytes</Name>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>BehBytes</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="dsp:MatrixWriter">
                <dsp:Path>C:\bonsai\bonsaiprotocols\base4harp\Beh_Hit_Data.bin</dsp:Path>
                <dsp:Suffix>FileCount</dsp:Suffix>
                <dsp:Overwrite>false</dsp:Overwrite>
                <dsp:Layout>ColumnMajor</dsp:Layout>
              </Combinator>
            </Expression>
            <Expression xsi:type="Disable">
              <Builder xsi:type="GroupWorkflow">
                <Name>Emulate</Name>
                <Description>Runs when emulate is True</Description>
                <Workflow>
                  <Nodes>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="wie:KeyDown">
                        <wie:Filter>Down</wie:Filter>
                        <wie:SuppressRepetitions>false</wie:SuppressRepetitions>
                      </Combinator>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="BooleanProperty">
                        <Value>true</Value>
                      </Combinator>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="wie:KeyUp">
                        <wie:Filter>Down</wie:Filter>
                      </Combinator>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="BooleanProperty">
                        <Value>false</Value>
                      </Combinator>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="rx:Merge" />
                    </Expression>
                    <Expression xsi:type="SubscribeSubject">
                      <Name>Emulate</Name>
                    </Expression>
                    <Expression xsi:type="Condition">
                      <Workflow>
                        <Nodes>
                          <Expression xsi:type="WorkflowInput">
                            <Name>Source1</Name>
                          </Expression>
                          <Expression xsi:type="WorkflowOutput" />
                        </Nodes>
                        <Edges>
                          <Edge From="0" To="1" Label="Source1" />
                        </Edges>
                      </Workflow>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="rx:SubscribeWhen" />
                    </Expression>
                    <Expression xsi:type="MulticastSubject">
                      <Name>Beam0Bool</Name>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="wie:KeyDown">
                        <wie:Filter>Up</wie:Filter>
                        <wie:SuppressRepetitions>false</wie:SuppressRepetitions>
                      </Combinator>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="BooleanProperty">
                        <Value>true</Value>
                      </Combinator>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="wie:KeyUp">
                        <wie:Filter>Up</wie:Filter>
                      </Combinator>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="BooleanProperty">
                        <Value>false</Value>
                      </Combinator>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="rx:Merge" />
                    </Expression>
                    <Expression xsi:type="SubscribeSubject">
                      <Name>Emulate</Name>
                    </Expression>
                    <Expression xsi:type="Condition">
                      <Workflow>
                        <Nodes>
                          <Expression xsi:type="WorkflowInput">
                            <Name>Source1</Name>
                          </Expression>
                          <Expression xsi:type="WorkflowOutput" />
                        </Nodes>
                        <Edges>
                          <Edge From="0" To="1" Label="Source1" />
                        </Edges>
                      </Workflow>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="rx:SubscribeWhen" />
                    </Expression>
                    <Expression xsi:type="MulticastSubject">
                      <Name>Beam1Bool</Name>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="wie:KeyDown">
                        <wie:Filter>D2</wie:Filter>
                        <wie:SuppressRepetitions>false</wie:SuppressRepetitions>
                      </Combinator>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="BooleanProperty">
                        <Value>true</Value>
                      </Combinator>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="wie:KeyUp">
                        <wie:Filter>D2</wie:Filter>
                      </Combinator>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="BooleanProperty">
                        <Value>false</Value>
                      </Combinator>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="rx:Merge" />
                    </Expression>
                    <Expression xsi:type="SubscribeSubject">
                      <Name>Emulate</Name>
                    </Expression>
                    <Expression xsi:type="Condition">
                      <Workflow>
                        <Nodes>
                          <Expression xsi:type="WorkflowInput">
                            <Name>Source1</Name>
                          </Expression>
                          <Expression xsi:type="WorkflowOutput" />
                        </Nodes>
                        <Edges>
                          <Edge From="0" To="1" Label="Source1" />
                        </Edges>
                      </Workflow>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="rx:SubscribeWhen" />
                    </Expression>
                    <Expression xsi:type="MulticastSubject">
                      <Name>Beam2Bool</Name>
                    </Expression>
                    <Expression xsi:type="Disable">
                      <Builder xsi:type="Combinator">
                        <Combinator xsi:type="wie:KeyDown">
                          <wie:Filter>None</wie:Filter>
                          <wie:SuppressRepetitions>false</wie:SuppressRepetitions>
                        </Combinator>
                      </Builder>
                    </Expression>
                    <Expression xsi:type="Disable">
                      <Builder xsi:type="Combinator">
                        <Combinator xsi:type="al:PlaySource">
                          <al:DeviceName>Generic Software on Speakers (Realtek High Definition Audio(SST))</al:DeviceName>
                        </Combinator>
                      </Builder>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="al:CreateAudioContext">
                        <al:SampleRate>0</al:SampleRate>
                        <al:Refresh>0</al:Refresh>
                        <al:Position>
                          <al:X>0</al:X>
                          <al:Y>0</al:Y>
                          <al:Z>0</al:Z>
                        </al:Position>
                        <al:Velocity>
                          <al:X>0</al:X>
                          <al:Y>0</al:Y>
                          <al:Z>0</al:Z>
                        </al:Velocity>
                        <al:Direction>
                          <al:X>-0</al:X>
                          <al:Y>-0</al:Y>
                          <al:Z>-1</al:Z>
                        </al:Direction>
                        <al:Up>
                          <al:X>0</al:X>
                          <al:Y>1</al:Y>
                          <al:Z>0</al:Z>
                        </al:Up>
                        <al:Gain>1</al:Gain>
                      </Combinator>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="al:AudioResources">
                        <al:Buffers>
                          <al:BufferConfiguration xsi:type="al:SoundBuffer">
                            <al:Name>i03_WhiteNoise</al:Name>
                            <al:FileName>C:\bonsai\bonsaiprotocols\Sound\toSoundCard\03_WhiteNoise.wav</al:FileName>
                          </al:BufferConfiguration>
                          <al:BufferConfiguration xsi:type="al:SoundBuffer">
                            <al:Name>i05_RewardTone_32bit_stereo_nohead</al:Name>
                            <al:FileName>C:\Users\Dammy\Documents\HarpSoundCard\Interface\toSoundCard\i05_RewardTone_32bit_stereo_nohead.bin</al:FileName>
                          </al:BufferConfiguration>
                          <al:BufferConfiguration xsi:type="al:SoundBuffer">
                            <al:Name>i05_GoCue</al:Name>
                            <al:FileName>C:\Users\Dammy\Documents\HarpSoundCard\Interface\toSoundCard\i05_GoCue.bin</al:FileName>
                          </al:BufferConfiguration>
                          <al:BufferConfiguration xsi:type="al:SoundBuffer">
                            <al:Name>i07_ViolationTone</al:Name>
                            <al:FileName>C:\Users\Dammy\Documents\HarpSoundCard\Interface\toSoundCard\i07_ViolationTone.bin</al:FileName>
                          </al:BufferConfiguration>
                          <al:BufferConfiguration xsi:type="al:SoundBuffer">
                            <al:Name>i08_TimeoutTone</al:Name>
                            <al:FileName>C:\Users\Dammy\Documents\HarpSoundCard\Interface\toSoundCard\i08_TimeoutTone.bin</al:FileName>
                          </al:BufferConfiguration>
                          <al:BufferConfiguration xsi:type="al:SoundBuffer">
                            <al:Name>i30_stop</al:Name>
                            <al:FileName>C:\Users\Dammy\Documents\HarpSoundCard\Interface\toSoundCard\i30_stop.bin</al:FileName>
                          </al:BufferConfiguration>
                        </al:Buffers>
                        <al:Sources>
                          <al:SourceConfiguration>
                            <al:Name>WhiteNoise</al:Name>
                            <al:BufferName>i02_WhiteNoise</al:BufferName>
                            <al:Direction>
                              <al:X>0</al:X>
                              <al:Y>0</al:Y>
                              <al:Z>0</al:Z>
                            </al:Direction>
                            <al:Position>
                              <al:X>0</al:X>
                              <al:Y>0</al:Y>
                              <al:Z>0</al:Z>
                            </al:Position>
                            <al:Velocity>
                              <al:X>0</al:X>
                              <al:Y>0</al:Y>
                              <al:Z>0</al:Z>
                            </al:Velocity>
                            <al:Looping>false</al:Looping>
                            <al:Relative>false</al:Relative>
                            <al:State>Initial</al:State>
                          </al:SourceConfiguration>
                          <al:SourceConfiguration>
                            <al:Name>RewardTone</al:Name>
                            <al:BufferName>i05_RewardTone_32bit_stereo_nohead</al:BufferName>
                            <al:Direction>
                              <al:X>0</al:X>
                              <al:Y>0</al:Y>
                              <al:Z>0</al:Z>
                            </al:Direction>
                            <al:Position>
                              <al:X>0</al:X>
                              <al:Y>0</al:Y>
                              <al:Z>0</al:Z>
                            </al:Position>
                            <al:Velocity>
                              <al:X>0</al:X>
                              <al:Y>0</al:Y>
                              <al:Z>0</al:Z>
                            </al:Velocity>
                            <al:Looping>false</al:Looping>
                            <al:Relative>false</al:Relative>
                            <al:State>Initial</al:State>
                          </al:SourceConfiguration>
                          <al:SourceConfiguration>
                            <al:Name>GoCue</al:Name>
                            <al:BufferName>i05_GoCue</al:BufferName>
                            <al:Direction>
                              <al:X>0</al:X>
                              <al:Y>0</al:Y>
                              <al:Z>0</al:Z>
                            </al:Direction>
                            <al:Position>
                              <al:X>0</al:X>
                              <al:Y>0</al:Y>
                              <al:Z>0</al:Z>
                            </al:Position>
                            <al:Velocity>
                              <al:X>0</al:X>
                              <al:Y>0</al:Y>
                              <al:Z>0</al:Z>
                            </al:Velocity>
                            <al:Looping>false</al:Looping>
                            <al:Relative>false</al:Relative>
                            <al:State>Initial</al:State>
                          </al:SourceConfiguration>
                          <al:SourceConfiguration>
                            <al:Name>ViolTone</al:Name>
                            <al:BufferName>i07_ViolationTone</al:BufferName>
                            <al:Direction>
                              <al:X>0</al:X>
                              <al:Y>0</al:Y>
                              <al:Z>0</al:Z>
                            </al:Direction>
                            <al:Position>
                              <al:X>0</al:X>
                              <al:Y>0</al:Y>
                              <al:Z>0</al:Z>
                            </al:Position>
                            <al:Velocity>
                              <al:X>0</al:X>
                              <al:Y>0</al:Y>
                              <al:Z>0</al:Z>
                            </al:Velocity>
                            <al:Looping>false</al:Looping>
                            <al:Relative>false</al:Relative>
                            <al:State>Initial</al:State>
                          </al:SourceConfiguration>
                          <al:SourceConfiguration>
                            <al:Name>TimeoutTone</al:Name>
                            <al:BufferName>i08_TimeoutTone</al:BufferName>
                            <al:Direction>
                              <al:X>0</al:X>
                              <al:Y>0</al:Y>
                              <al:Z>0</al:Z>
                            </al:Direction>
                            <al:Position>
                              <al:X>0</al:X>
                              <al:Y>0</al:Y>
                              <al:Z>0</al:Z>
                            </al:Position>
                            <al:Velocity>
                              <al:X>0</al:X>
                              <al:Y>0</al:Y>
                              <al:Z>0</al:Z>
                            </al:Velocity>
                            <al:Looping>false</al:Looping>
                            <al:Relative>false</al:Relative>
                            <al:State>Initial</al:State>
                          </al:SourceConfiguration>
                          <al:SourceConfiguration>
                            <al:Name>Stop</al:Name>
                            <al:BufferName>i30_stop</al:BufferName>
                            <al:Direction>
                              <al:X>0</al:X>
                              <al:Y>0</al:Y>
                              <al:Z>0</al:Z>
                            </al:Direction>
                            <al:Position>
                              <al:X>0</al:X>
                              <al:Y>0</al:Y>
                              <al:Z>0</al:Z>
                            </al:Position>
                            <al:Velocity>
                              <al:X>0</al:X>
                              <al:Y>0</al:Y>
                              <al:Z>0</al:Z>
                            </al:Velocity>
                            <al:Looping>false</al:Looping>
                            <al:Relative>false</al:Relative>
                            <al:State>Initial</al:State>
                          </al:SourceConfiguration>
                        </al:Sources>
                      </Combinator>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="res:LoadResources" />
                    </Expression>
                    <Expression xsi:type="SubscribeSubject">
                      <Name>SoundIndex</Name>
                    </Expression>
                    <Expression xsi:type="SubscribeSubject">
                      <Name>Soundcard?</Name>
                    </Expression>
                    <Expression xsi:type="Condition">
                      <Workflow>
                        <Nodes>
                          <Expression xsi:type="WorkflowInput">
                            <Name>Source1</Name>
                          </Expression>
                          <Expression xsi:type="Equal">
                            <Operand xsi:type="BooleanProperty">
                              <Value>false</Value>
                            </Operand>
                          </Expression>
                          <Expression xsi:type="WorkflowOutput" />
                        </Nodes>
                        <Edges>
                          <Edge From="0" To="1" Label="Source1" />
                          <Edge From="1" To="2" Label="Source1" />
                        </Edges>
                      </Workflow>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="rx:SubscribeWhen" />
                    </Expression>
                    <Expression xsi:type="Condition">
                      <Name>2</Name>
                      <Workflow>
                        <Nodes>
                          <Expression xsi:type="WorkflowInput">
                            <Name>Source1</Name>
                          </Expression>
                          <Expression xsi:type="Equal">
                            <Operand xsi:type="IntProperty">
                              <Value>3</Value>
                            </Operand>
                          </Expression>
                          <Expression xsi:type="WorkflowOutput" />
                        </Nodes>
                        <Edges>
                          <Edge From="0" To="1" Label="Source1" />
                          <Edge From="1" To="2" Label="Source1" />
                        </Edges>
                      </Workflow>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="al:PlaySource">
                        <al:SourceName>
                          <al:string>WhiteNoise</al:string>
                        </al:SourceName>
                      </Combinator>
                    </Expression>
                    <Expression xsi:type="Condition">
                      <Name>2</Name>
                      <Workflow>
                        <Nodes>
                          <Expression xsi:type="WorkflowInput">
                            <Name>Source1</Name>
                          </Expression>
                          <Expression xsi:type="Equal">
                            <Operand xsi:type="IntProperty">
                              <Value>3</Value>
                            </Operand>
                          </Expression>
                          <Expression xsi:type="WorkflowOutput" />
                        </Nodes>
                        <Edges>
                          <Edge From="0" To="1" Label="Source1" />
                          <Edge From="1" To="2" Label="Source1" />
                        </Edges>
                      </Workflow>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="al:PlaySource">
                        <al:SourceName>
                          <al:string>WhiteNoise</al:string>
                        </al:SourceName>
                      </Combinator>
                    </Expression>
                    <Expression xsi:type="Condition">
                      <Name>2</Name>
                      <Workflow>
                        <Nodes>
                          <Expression xsi:type="WorkflowInput">
                            <Name>Source1</Name>
                          </Expression>
                          <Expression xsi:type="Equal">
                            <Operand xsi:type="IntProperty">
                              <Value>3</Value>
                            </Operand>
                          </Expression>
                          <Expression xsi:type="WorkflowOutput" />
                        </Nodes>
                        <Edges>
                          <Edge From="0" To="1" Label="Source1" />
                          <Edge From="1" To="2" Label="Source1" />
                        </Edges>
                      </Workflow>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="al:PlaySource">
                        <al:SourceName>
                          <al:string>WhiteNoise</al:string>
                        </al:SourceName>
                      </Combinator>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="BooleanProperty">
                        <Value>false</Value>
                      </Combinator>
                    </Expression>
                    <Expression xsi:type="BehaviorSubject">
                      <Name>Emulate</Name>
                    </Expression>
                  </Nodes>
                  <Edges>
                    <Edge From="0" To="1" Label="Source1" />
                    <Edge From="1" To="4" Label="Source1" />
                    <Edge From="2" To="3" Label="Source1" />
                    <Edge From="3" To="4" Label="Source2" />
                    <Edge From="4" To="7" Label="Source1" />
                    <Edge From="5" To="6" Label="Source1" />
                    <Edge From="6" To="7" Label="Source2" />
                    <Edge From="7" To="8" Label="Source1" />
                    <Edge From="9" To="10" Label="Source1" />
                    <Edge From="10" To="13" Label="Source1" />
                    <Edge From="11" To="12" Label="Source1" />
                    <Edge From="12" To="13" Label="Source2" />
                    <Edge From="13" To="16" Label="Source1" />
                    <Edge From="14" To="15" Label="Source1" />
                    <Edge From="15" To="16" Label="Source2" />
                    <Edge From="16" To="17" Label="Source1" />
                    <Edge From="18" To="19" Label="Source1" />
                    <Edge From="19" To="22" Label="Source1" />
                    <Edge From="20" To="21" Label="Source1" />
                    <Edge From="21" To="22" Label="Source2" />
                    <Edge From="22" To="25" Label="Source1" />
                    <Edge From="23" To="24" Label="Source1" />
                    <Edge From="24" To="25" Label="Source2" />
                    <Edge From="25" To="26" Label="Source1" />
                    <Edge From="27" To="28" Label="Source1" />
                    <Edge From="29" To="30" Label="Source1" />
                    <Edge From="30" To="31" Label="Source1" />
                    <Edge From="32" To="35" Label="Source1" />
                    <Edge From="33" To="34" Label="Source1" />
                    <Edge From="34" To="35" Label="Source2" />
                    <Edge From="35" To="36" Label="Source1" />
                    <Edge From="35" To="38" Label="Source1" />
                    <Edge From="35" To="40" Label="Source1" />
                    <Edge From="36" To="37" Label="Source1" />
                    <Edge From="38" To="39" Label="Source1" />
                    <Edge From="40" To="41" Label="Source1" />
                    <Edge From="42" To="43" Label="Source1" />
                  </Edges>
                </Workflow>
              </Builder>
            </Expression>
          </Nodes>
          <Edges>
            <Edge From="0" To="1" Label="Source1" />
            <Edge From="1" To="2" Label="Source1" />
            <Edge From="2" To="3" Label="Source1" />
            <Edge From="4" To="5" Label="Source1" />
            <Edge From="5" To="6" Label="Source1" />
            <Edge From="7" To="8" Label="Source1" />
            <Edge From="8" To="9" Label="Source1" />
            <Edge From="10" To="11" Label="Source1" />
            <Edge From="11" To="12" Label="Source1" />
            <Edge From="12" To="16" Label="Source1" />
            <Edge From="13" To="14" Label="Source1" />
            <Edge From="14" To="15" Label="Source1" />
            <Edge From="15" To="16" Label="Source2" />
            <Edge From="16" To="17" Label="Source1" />
            <Edge From="16" To="19" Label="Source1" />
            <Edge From="16" To="21" Label="Source1" />
            <Edge From="16" To="23" Label="Source1" />
            <Edge From="17" To="18" Label="Source1" />
            <Edge From="19" To="20" Label="Source1" />
            <Edge From="21" To="22" Label="Source1" />
            <Edge From="23" To="24" Label="Source1" />
            <Edge From="25" To="26" Label="Source1" />
          </Edges>
        </Workflow>
      </Expression>
      <Expression xsi:type="GroupWorkflow">
        <Name>Sound_Mechanics</Name>
        <Workflow>
          <Nodes>
            <Expression xsi:type="SubscribeSubject">
              <Name>Vol</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:Skip">
                <rx:Count>1</rx:Count>
              </Combinator>
            </Expression>
            <Expression xsi:type="scr:ExpressionTransform">
              <scr:Expression>uint16(it)</scr:Expression>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>Freq</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:Skip">
                <rx:Count>1</rx:Count>
              </Combinator>
            </Expression>
            <Expression xsi:type="scr:PythonTransform">
              <scr:Script>@returns(float)
def process(value):
  return 2**value</scr:Script>
            </Expression>
            <Expression xsi:type="scr:ExpressionTransform">
              <scr:Expression>uint16(it)</scr:Expression>
            </Expression>
            <Expression xsi:type="harp:Format">
              <harp:MessageType>Write</harp:MessageType>
              <harp:Address>32</harp:Address>
              <harp:PayloadType>U16</harp:PayloadType>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>PlaySound</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:Skip">
                <rx:Count>1</rx:Count>
              </Combinator>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="IntProperty">
                <Value>32</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="scr:ExpressionTransform">
              <scr:Expression>uint16(it)</scr:Expression>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:CombineLatest" />
            </Expression>
            <Expression xsi:type="SelectMany">
              <Name>ToArray</Name>
              <Workflow>
                <Nodes>
                  <Expression xsi:type="WorkflowInput">
                    <Name>Source1</Name>
                  </Expression>
                  <Expression xsi:type="MemberSelector">
                    <Selector>Item1</Selector>
                  </Expression>
                  <Expression xsi:type="MemberSelector">
                    <Selector>Item2</Selector>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="rx:Merge" />
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="rx:ToArray" />
                  </Expression>
                  <Expression xsi:type="WorkflowOutput" />
                </Nodes>
                <Edges>
                  <Edge From="0" To="1" Label="Source1" />
                  <Edge From="0" To="2" Label="Source1" />
                  <Edge From="1" To="3" Label="Source1" />
                  <Edge From="2" To="3" Label="Source2" />
                  <Edge From="3" To="4" Label="Source1" />
                  <Edge From="4" To="5" Label="Source1" />
                </Edges>
              </Workflow>
            </Expression>
            <Expression xsi:type="harp:Format">
              <harp:MessageType>Write</harp:MessageType>
              <harp:Address>36</harp:Address>
              <harp:PayloadType>U16</harp:PayloadType>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>StopSound</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="IntProperty">
                <Value>3</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="scr:ExpressionTransform">
              <scr:Expression>byte(it)</scr:Expression>
            </Expression>
            <Expression xsi:type="harp:Format">
              <harp:MessageType>Write</harp:MessageType>
              <harp:Address>33</harp:Address>
              <harp:PayloadType>U8</harp:PayloadType>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:Merge" />
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="harp:Device">
                <harp:DeviceState>Active</harp:DeviceState>
                <harp:DumpRegisters>true</harp:DumpRegisters>
                <harp:LedState>On</harp:LedState>
                <harp:VisualIndicators>On</harp:VisualIndicators>
                <harp:Heartbeat>Disable</harp:Heartbeat>
                <harp:IgnoreErrors>false</harp:IgnoreErrors>
                <harp:PortName>COM3</harp:PortName>
              </Combinator>
            </Expression>
            <Expression xsi:type="WorkflowOutput" />
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="FloatProperty">
                <Value>11.5</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="BehaviorSubject">
              <Name>Freq</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="IntProperty">
                <Value>550</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="BehaviorSubject">
              <Name>Vol</Name>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>Freq</Name>
            </Expression>
            <Expression xsi:type="BehaviorSubject">
              <Name>PlaySound</Name>
            </Expression>
            <Expression xsi:type="Disable">
              <Builder xsi:type="Combinator">
                <Combinator xsi:type="wie:KeyDown">
                  <wie:Filter>End</wie:Filter>
                  <wie:SuppressRepetitions>false</wie:SuppressRepetitions>
                </Combinator>
              </Builder>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="IntProperty">
                <Value>3</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="BehaviorSubject">
              <Name>StopSound</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="FloatProperty">
                <Value>11.96578</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="BehaviorSubject">
              <Name>4kHz</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="FloatProperty">
                <Value>13.96578</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="BehaviorSubject">
              <Name>16kHz</Name>
            </Expression>
          </Nodes>
          <Edges>
            <Edge From="0" To="1" Label="Source1" />
            <Edge From="1" To="2" Label="Source1" />
            <Edge From="2" To="12" Label="Source2" />
            <Edge From="3" To="4" Label="Source1" />
            <Edge From="4" To="5" Label="Source1" />
            <Edge From="5" To="6" Label="Source1" />
            <Edge From="6" To="7" Label="Source1" />
            <Edge From="7" To="19" Label="Source2" />
            <Edge From="8" To="9" Label="Source1" />
            <Edge From="9" To="10" Label="Source1" />
            <Edge From="10" To="11" Label="Source1" />
            <Edge From="11" To="12" Label="Source1" />
            <Edge From="12" To="13" Label="Source1" />
            <Edge From="13" To="14" Label="Source1" />
            <Edge From="14" To="19" Label="Source1" />
            <Edge From="15" To="16" Label="Source1" />
            <Edge From="16" To="17" Label="Source1" />
            <Edge From="17" To="18" Label="Source1" />
            <Edge From="18" To="19" Label="Source3" />
            <Edge From="19" To="20" Label="Source1" />
            <Edge From="20" To="21" Label="Source1" />
            <Edge From="22" To="23" Label="Source1" />
            <Edge From="24" To="25" Label="Source1" />
            <Edge From="26" To="27" Label="Source1" />
            <Edge From="28" To="29" Label="Source1" />
            <Edge From="29" To="30" Label="Source1" />
            <Edge From="31" To="32" Label="Source1" />
            <Edge From="33" To="34" Label="Source1" />
          </Edges>
        </Workflow>
      </Expression>
      <Expression xsi:type="ExternalizedMapping">
        <Property Name="RightValveTime" />
        <Property Name="LeftValveTime" />
        <Property Name="ResponseWindow" DisplayName="ResponseWindow (s)" />
        <Property Name="ITI (ms)" />
        <Property Name="Anti_Bias_Window" />
        <Property Name="Reward_Delay (ms)" />
        <Property Name="Rew_Avg_Window_Size" />
      </Expression>
      <Expression xsi:type="GroupWorkflow">
        <Name>DynamicVariables</Name>
        <Workflow>
          <Nodes>
            <Expression xsi:type="ExternalizedMapping">
              <Property Name="Value" DisplayName="RightValveTime" />
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="FloatProperty">
                <Value>0</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="scr:ExpressionTransform">
              <scr:Name>TimeFromMilliseconds</scr:Name>
              <scr:Expression>TimeSpan.FromMilliseconds(it)</scr:Expression>
            </Expression>
            <Expression xsi:type="BehaviorSubject">
              <Name>RightValveTime</Name>
            </Expression>
            <Expression xsi:type="ExternalizedMapping">
              <Property Name="Value" DisplayName="LeftValveTime" />
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="FloatProperty">
                <Value>0</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="scr:ExpressionTransform">
              <scr:Name>TimeFromMilliseconds</scr:Name>
              <scr:Expression>TimeSpan.FromMilliseconds(it)</scr:Expression>
            </Expression>
            <Expression xsi:type="BehaviorSubject">
              <Name>LeftValveTime</Name>
            </Expression>
            <Expression xsi:type="ExternalizedMapping">
              <Property Name="Value" DisplayName="ResponseWindow" />
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="FloatProperty">
                <Value>60</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="scr:ExpressionTransform">
              <scr:Name>TimeFromSeconds</scr:Name>
              <scr:Expression>TimeSpan.FromSeconds(it)</scr:Expression>
            </Expression>
            <Expression xsi:type="BehaviorSubject">
              <Name>ResponseWindow</Name>
            </Expression>
            <Expression xsi:type="ExternalizedMapping">
              <Property Name="Value" DisplayName="ITI (ms)" />
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="FloatProperty">
                <Value>2000</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="scr:ExpressionTransform">
              <scr:Name>TimeFromMilliseconds</scr:Name>
              <scr:Expression>TimeSpan.FromMilliseconds(it)</scr:Expression>
            </Expression>
            <Expression xsi:type="BehaviorSubject">
              <Name>ITI</Name>
            </Expression>
            <Expression xsi:type="ExternalizedMapping">
              <Property Name="Value" DisplayName="Anti_Bias_Window" />
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="IntProperty">
                <Value>20</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="BehaviorSubject">
              <Name>Anti_Bias_Window</Name>
            </Expression>
            <Expression xsi:type="ExternalizedMapping">
              <Property Name="Value" DisplayName="Reward_Delay (ms)" />
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="FloatProperty">
                <Value>2000</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="scr:ExpressionTransform">
              <scr:Name>TimeFromMilliseconds</scr:Name>
              <scr:Expression>TimeSpan.FromMilliseconds(it)</scr:Expression>
            </Expression>
            <Expression xsi:type="BehaviorSubject">
              <Name>RewDelay</Name>
            </Expression>
            <Expression xsi:type="ExternalizedMapping">
              <Property Name="Value" DisplayName="Rew_Avg_Window_Size" />
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="IntProperty">
                <Value>20</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="BehaviorSubject">
              <Name>Rew_Avg_Window_Size</Name>
            </Expression>
          </Nodes>
          <Edges>
            <Edge From="0" To="1" Label="Source1" />
            <Edge From="1" To="2" Label="Source1" />
            <Edge From="2" To="3" Label="Source1" />
            <Edge From="4" To="5" Label="Source1" />
            <Edge From="5" To="6" Label="Source1" />
            <Edge From="6" To="7" Label="Source1" />
            <Edge From="8" To="9" Label="Source1" />
            <Edge From="9" To="10" Label="Source1" />
            <Edge From="10" To="11" Label="Source1" />
            <Edge From="12" To="13" Label="Source1" />
            <Edge From="13" To="14" Label="Source1" />
            <Edge From="14" To="15" Label="Source1" />
            <Edge From="16" To="17" Label="Source1" />
            <Edge From="17" To="18" Label="Source1" />
            <Edge From="19" To="20" Label="Source1" />
            <Edge From="20" To="21" Label="Source1" />
            <Edge From="21" To="22" Label="Source1" />
            <Edge From="23" To="24" Label="Source1" />
            <Edge From="24" To="25" Label="Source1" />
          </Edges>
        </Workflow>
      </Expression>
      <Expression xsi:type="GroupWorkflow">
        <Name>StaticVariables</Name>
        <Workflow>
          <Nodes>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="FloatProperty">
                <Value>1</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="scr:ExpressionTransform">
              <scr:Expression>TimeSpan.FromSeconds(it)</scr:Expression>
            </Expression>
            <Expression xsi:type="BehaviorSubject">
              <Name>WaitForResponse</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="num:CreateRandom">
                <num:Seed xsi:nil="true" />
              </Combinator>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="p2:CreateContinuousUniform">
                <p2:Lower>1</p2:Lower>
                <p2:Upper>3</p2:Upper>
              </Combinator>
            </Expression>
            <Expression xsi:type="BehaviorSubject">
              <Name>DelayDistribution</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="FloatProperty">
                <Value>1</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="scr:ExpressionTransform">
              <scr:Expression>TimeSpan.FromSeconds(it)</scr:Expression>
            </Expression>
            <Expression xsi:type="BehaviorSubject">
              <Name>DelayPeriod</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="BooleanProperty">
                <Value>false</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="BehaviorSubject">
              <Name>Correct</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="gl:RenderFrame" />
            </Expression>
            <Expression xsi:type="IncludeWorkflow" Path="BonVision:Environment.NormalizedView.bonsai" />
            <Expression xsi:type="PublishSubject">
              <Name>DrawQuad</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="IntProperty">
                <Value>0</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="PublishSubject">
              <Name>TrialOutcome</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="IntProperty">
                <Value>0</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="BehaviorSubject">
              <Name>FirstLick</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="IntProperty">
                <Value>0</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="BehaviorSubject">
              <Name>SecondLick</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="gli:KeyDown">
                <gli:Key>End</gli:Key>
                <gli:Modifiers xsi:nil="true" />
              </Combinator>
            </Expression>
            <Expression xsi:type="BehaviorSubject">
              <Name>ExpEnd</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="BooleanProperty">
                <Value>false</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="BehaviorSubject">
              <Name>OkToLick?</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="BooleanProperty">
                <Value>false</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="BehaviorSubject">
              <Name>EarlyLick</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="BooleanProperty">
                <Value>false</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="BehaviorSubject">
              <Name>TrialEnd</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="IntProperty">
                <Value>0</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="BehaviorSubject">
              <Name>Tone</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="StringProperty">
                <Value>QP04</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="BehaviorSubject">
              <Name>MouseID</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="FloatProperty">
                <Value>300</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="scr:ExpressionTransform">
              <scr:Name>TimeFromMilliseconds</scr:Name>
              <scr:Expression>TimeSpan.FromMilliseconds(it)</scr:Expression>
            </Expression>
            <Expression xsi:type="BehaviorSubject">
              <Name>ToneDur</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="FloatProperty">
                <Value>300</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="scr:ExpressionTransform">
              <scr:Name>TimeFromMilliseconds</scr:Name>
              <scr:Expression>TimeSpan.FromMilliseconds(it)</scr:Expression>
            </Expression>
            <Expression xsi:type="BehaviorSubject">
              <Name>GoCueDur</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="IntProperty">
                <Value>0</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="BehaviorSubject">
              <Name>TrialNumber</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="IntProperty">
                <Value>0</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="BehaviorSubject">
              <Name>RewSide </Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="IntProperty">
                <Value>0</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="BehaviorSubject">
              <Name>DelayedReward</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="IntProperty">
                <Value>0</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="BehaviorSubject">
              <Name>Reward</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="BooleanProperty">
                <Value>false</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="BehaviorSubject">
              <Name>AbortTrial</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="IntProperty">
                <Value>0</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="BehaviorSubject">
              <Name>Attempts</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="IntProperty">
                <Value>0</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="BehaviorSubject">
              <Name>CorrectCount</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="IntProperty">
                <Value>0</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="BehaviorSubject">
              <Name>RewardCount</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="FloatProperty">
                <Value>0.5</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="BehaviorSubject">
              <Name>%_Right_Licks</Name>
            </Expression>
          </Nodes>
          <Edges>
            <Edge From="0" To="1" Label="Source1" />
            <Edge From="1" To="2" Label="Source1" />
            <Edge From="3" To="4" Label="Source1" />
            <Edge From="4" To="5" Label="Source1" />
            <Edge From="6" To="7" Label="Source1" />
            <Edge From="7" To="8" Label="Source1" />
            <Edge From="9" To="10" Label="Source1" />
            <Edge From="11" To="12" Label="Source1" />
            <Edge From="12" To="13" Label="Source1" />
            <Edge From="14" To="15" Label="Source1" />
            <Edge From="16" To="17" Label="Source1" />
            <Edge From="18" To="19" Label="Source1" />
            <Edge From="20" To="21" Label="Source1" />
            <Edge From="22" To="23" Label="Source1" />
            <Edge From="24" To="25" Label="Source1" />
            <Edge From="26" To="27" Label="Source1" />
            <Edge From="28" To="29" Label="Source1" />
            <Edge From="30" To="31" Label="Source1" />
            <Edge From="32" To="33" Label="Source1" />
            <Edge From="33" To="34" Label="Source1" />
            <Edge From="35" To="36" Label="Source1" />
            <Edge From="36" To="37" Label="Source1" />
            <Edge From="38" To="39" Label="Source1" />
            <Edge From="40" To="41" Label="Source1" />
            <Edge From="42" To="43" Label="Source1" />
            <Edge From="44" To="45" Label="Source1" />
            <Edge From="46" To="47" Label="Source1" />
            <Edge From="48" To="49" Label="Source1" />
            <Edge From="50" To="51" Label="Source1" />
            <Edge From="52" To="53" Label="Source1" />
            <Edge From="54" To="55" Label="Source1" />
          </Edges>
        </Workflow>
      </Expression>
      <Expression xsi:type="SubscribeSubject">
        <Name>ExpEnd</Name>
      </Expression>
      <Expression xsi:type="SubscribeSubject">
        <Name>ITI</Name>
      </Expression>
      <Expression xsi:type="PropertyMapping">
        <PropertyMappings>
          <Property Name="DueTime" />
        </PropertyMappings>
      </Expression>
      <Expression xsi:type="Combinator">
        <Combinator xsi:type="rx:Timer">
          <rx:DueTime>PT2S</rx:DueTime>
          <rx:Period>PT0S</rx:Period>
        </Combinator>
      </Expression>
      <Expression xsi:type="Sink">
        <Name>PrepTrial</Name>
        <Workflow>
          <Nodes>
            <Expression xsi:type="WorkflowInput">
              <Name>Source1</Name>
            </Expression>
            <Expression xsi:type="Sink">
              <Name>SetSpouts</Name>
              <Workflow>
                <Nodes>
                  <Expression xsi:type="SubscribeSubject">
                    <Name>Beam1Bool</Name>
                  </Expression>
                  <Expression xsi:type="Condition">
                    <Workflow>
                      <Nodes>
                        <Expression xsi:type="WorkflowInput">
                          <Name>Source1</Name>
                        </Expression>
                        <Expression xsi:type="BitwiseNot" />
                        <Expression xsi:type="WorkflowOutput" />
                      </Nodes>
                      <Edges>
                        <Edge From="0" To="1" Label="Source1" />
                        <Edge From="1" To="2" Label="Source1" />
                      </Edges>
                    </Workflow>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="BooleanProperty">
                      <Value>true</Value>
                    </Combinator>
                  </Expression>
                  <Expression xsi:type="MulticastSubject">
                    <Name>Beam1Bool</Name>
                  </Expression>
                  <Expression xsi:type="SubscribeSubject">
                    <Name>Beam2Bool</Name>
                  </Expression>
                  <Expression xsi:type="Condition">
                    <Workflow>
                      <Nodes>
                        <Expression xsi:type="WorkflowInput">
                          <Name>Source1</Name>
                        </Expression>
                        <Expression xsi:type="BitwiseNot" />
                        <Expression xsi:type="WorkflowOutput" />
                      </Nodes>
                      <Edges>
                        <Edge From="0" To="1" Label="Source1" />
                        <Edge From="1" To="2" Label="Source1" />
                      </Edges>
                    </Workflow>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="BooleanProperty">
                      <Value>true</Value>
                    </Combinator>
                  </Expression>
                  <Expression xsi:type="MulticastSubject">
                    <Name>Beam2Bool</Name>
                  </Expression>
                  <Expression xsi:type="Disable">
                    <Builder xsi:type="SubscribeSubject">
                      <Name>Beam0Bool</Name>
                    </Builder>
                  </Expression>
                  <Expression xsi:type="Disable">
                    <Builder xsi:type="Condition">
                      <Workflow>
                        <Nodes>
                          <Expression xsi:type="WorkflowInput">
                            <Name>Source1</Name>
                          </Expression>
                          <Expression xsi:type="BitwiseNot" />
                          <Expression xsi:type="WorkflowOutput" />
                        </Nodes>
                        <Edges>
                          <Edge From="0" To="1" Label="Source1" />
                          <Edge From="1" To="2" Label="Source1" />
                        </Edges>
                      </Workflow>
                    </Builder>
                  </Expression>
                  <Expression xsi:type="Disable">
                    <Builder xsi:type="Combinator">
                      <Combinator xsi:type="BooleanProperty">
                        <Value>true</Value>
                      </Combinator>
                    </Builder>
                  </Expression>
                  <Expression xsi:type="Disable">
                    <Builder xsi:type="MulticastSubject">
                      <Name>Beam0Bool</Name>
                    </Builder>
                  </Expression>
                </Nodes>
                <Edges>
                  <Edge From="0" To="1" Label="Source1" />
                  <Edge From="1" To="2" Label="Source1" />
                  <Edge From="2" To="3" Label="Source1" />
                  <Edge From="4" To="5" Label="Source1" />
                  <Edge From="5" To="6" Label="Source1" />
                  <Edge From="6" To="7" Label="Source1" />
                  <Edge From="8" To="9" Label="Source1" />
                  <Edge From="9" To="10" Label="Source1" />
                  <Edge From="10" To="11" Label="Source1" />
                </Edges>
              </Workflow>
            </Expression>
            <Expression xsi:type="Sink">
              <Name>ResetAttempts</Name>
              <Workflow>
                <Nodes>
                  <Expression xsi:type="WorkflowInput">
                    <Name>Source1</Name>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="IntProperty">
                      <Value>0</Value>
                    </Combinator>
                  </Expression>
                  <Expression xsi:type="MulticastSubject">
                    <Name>Attempts</Name>
                  </Expression>
                  <Expression xsi:type="WorkflowOutput" />
                </Nodes>
                <Edges>
                  <Edge From="0" To="1" Label="Source1" />
                  <Edge From="1" To="2" Label="Source1" />
                  <Edge From="2" To="3" Label="Source1" />
                </Edges>
              </Workflow>
            </Expression>
            <Expression xsi:type="WorkflowOutput" />
          </Nodes>
          <Edges>
            <Edge From="0" To="1" Label="Source1" />
            <Edge From="1" To="2" Label="Source1" />
            <Edge From="2" To="3" Label="Source1" />
          </Edges>
        </Workflow>
      </Expression>
      <Expression xsi:type="SelectMany">
        <Name>Trial</Name>
        <Workflow>
          <Nodes>
            <Expression xsi:type="WorkflowInput">
              <Name>Source1</Name>
            </Expression>
            <Expression xsi:type="SelectMany">
              <Name>Tone</Name>
              <Workflow>
                <Nodes>
                  <Expression xsi:type="SubscribeSubject">
                    <Name>%_Right_Licks</Name>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="rx:Take">
                      <rx:Count>1</rx:Count>
                    </Combinator>
                  </Expression>
                  <Expression xsi:type="Condition">
                    <Name>Below_30%</Name>
                    <Workflow>
                      <Nodes>
                        <Expression xsi:type="WorkflowInput">
                          <Name>Source1</Name>
                        </Expression>
                        <Expression xsi:type="LessThan">
                          <Operand xsi:type="FloatProperty">
                            <Value>0.3</Value>
                          </Operand>
                        </Expression>
                        <Expression xsi:type="WorkflowOutput" />
                      </Nodes>
                      <Edges>
                        <Edge From="0" To="1" Label="Source1" />
                        <Edge From="1" To="2" Label="Source1" />
                      </Edges>
                    </Workflow>
                  </Expression>
                  <Expression xsi:type="SelectMany">
                    <Name>16kHz</Name>
                    <Workflow>
                      <Nodes>
                        <Expression xsi:type="SubscribeSubject">
                          <Name>16kHz</Name>
                        </Expression>
                        <Expression xsi:type="MulticastSubject">
                          <Name>Freq</Name>
                        </Expression>
                        <Expression xsi:type="SubscribeSubject">
                          <Name>ToneDur</Name>
                        </Expression>
                        <Expression xsi:type="PropertyMapping">
                          <PropertyMappings>
                            <Property Name="DueTime" />
                          </PropertyMappings>
                        </Expression>
                        <Expression xsi:type="Combinator">
                          <Combinator xsi:type="rx:Delay">
                            <rx:DueTime>PT0.3S</rx:DueTime>
                          </Combinator>
                        </Expression>
                        <Expression xsi:type="Combinator">
                          <Combinator xsi:type="IntProperty">
                            <Value>3</Value>
                          </Combinator>
                        </Expression>
                        <Expression xsi:type="MulticastSubject">
                          <Name>StopSound</Name>
                        </Expression>
                        <Expression xsi:type="Combinator">
                          <Combinator xsi:type="IntProperty">
                            <Value>16</Value>
                          </Combinator>
                        </Expression>
                        <Expression xsi:type="MulticastSubject">
                          <Name>Tone</Name>
                        </Expression>
                        <Expression xsi:type="Combinator">
                          <Combinator xsi:type="rx:Take">
                            <rx:Count>1</rx:Count>
                          </Combinator>
                        </Expression>
                        <Expression xsi:type="WorkflowOutput" />
                      </Nodes>
                      <Edges>
                        <Edge From="0" To="1" Label="Source1" />
                        <Edge From="1" To="4" Label="Source1" />
                        <Edge From="2" To="3" Label="Source1" />
                        <Edge From="3" To="4" Label="Source2" />
                        <Edge From="4" To="5" Label="Source1" />
                        <Edge From="5" To="6" Label="Source1" />
                        <Edge From="6" To="7" Label="Source1" />
                        <Edge From="7" To="8" Label="Source1" />
                        <Edge From="8" To="9" Label="Source1" />
                        <Edge From="9" To="10" Label="Source1" />
                      </Edges>
                    </Workflow>
                  </Expression>
                  <Expression xsi:type="Condition">
                    <Name>Above_30%</Name>
                    <Workflow>
                      <Nodes>
                        <Expression xsi:type="WorkflowInput">
                          <Name>Source1</Name>
                        </Expression>
                        <Expression xsi:type="GreaterThan">
                          <Operand xsi:type="FloatProperty">
                            <Value>0.7</Value>
                          </Operand>
                        </Expression>
                        <Expression xsi:type="WorkflowOutput" />
                      </Nodes>
                      <Edges>
                        <Edge From="0" To="1" Label="Source1" />
                        <Edge From="1" To="2" Label="Source1" />
                      </Edges>
                    </Workflow>
                  </Expression>
                  <Expression xsi:type="SelectMany">
                    <Name>4Khz</Name>
                    <Workflow>
                      <Nodes>
                        <Expression xsi:type="SubscribeSubject">
                          <Name>4kHz</Name>
                        </Expression>
                        <Expression xsi:type="MulticastSubject">
                          <Name>Freq</Name>
                        </Expression>
                        <Expression xsi:type="SubscribeSubject">
                          <Name>ToneDur</Name>
                        </Expression>
                        <Expression xsi:type="PropertyMapping">
                          <PropertyMappings>
                            <Property Name="DueTime" />
                          </PropertyMappings>
                        </Expression>
                        <Expression xsi:type="Combinator">
                          <Combinator xsi:type="rx:Delay">
                            <rx:DueTime>PT0.3S</rx:DueTime>
                          </Combinator>
                        </Expression>
                        <Expression xsi:type="Combinator">
                          <Combinator xsi:type="IntProperty">
                            <Value>3</Value>
                          </Combinator>
                        </Expression>
                        <Expression xsi:type="MulticastSubject">
                          <Name>StopSound</Name>
                        </Expression>
                        <Expression xsi:type="Combinator">
                          <Combinator xsi:type="IntProperty">
                            <Value>4</Value>
                          </Combinator>
                        </Expression>
                        <Expression xsi:type="MulticastSubject">
                          <Name>Tone</Name>
                        </Expression>
                        <Expression xsi:type="Combinator">
                          <Combinator xsi:type="rx:Take">
                            <rx:Count>1</rx:Count>
                          </Combinator>
                        </Expression>
                        <Expression xsi:type="WorkflowOutput" />
                      </Nodes>
                      <Edges>
                        <Edge From="0" To="1" Label="Source1" />
                        <Edge From="1" To="4" Label="Source1" />
                        <Edge From="2" To="3" Label="Source1" />
                        <Edge From="3" To="4" Label="Source2" />
                        <Edge From="4" To="5" Label="Source1" />
                        <Edge From="5" To="6" Label="Source1" />
                        <Edge From="6" To="7" Label="Source1" />
                        <Edge From="7" To="8" Label="Source1" />
                        <Edge From="8" To="9" Label="Source1" />
                        <Edge From="9" To="10" Label="Source1" />
                      </Edges>
                    </Workflow>
                  </Expression>
                  <Expression xsi:type="Condition">
                    <Name>Random</Name>
                    <Workflow>
                      <Nodes>
                        <Expression xsi:type="WorkflowInput">
                          <Name>Source1</Name>
                        </Expression>
                        <Expression xsi:type="LessThanOrEqual">
                          <Operand xsi:type="FloatProperty">
                            <Value>0.7</Value>
                          </Operand>
                        </Expression>
                        <Expression xsi:type="GreaterThanOrEqual">
                          <Operand xsi:type="FloatProperty">
                            <Value>0.3</Value>
                          </Operand>
                        </Expression>
                        <Expression xsi:type="Combinator">
                          <Combinator xsi:type="rx:Zip" />
                        </Expression>
                        <Expression xsi:type="LogicalAnd" />
                        <Expression xsi:type="Combinator">
                          <Combinator xsi:type="rx:Take">
                            <rx:Count>1</rx:Count>
                          </Combinator>
                        </Expression>
                        <Expression xsi:type="WorkflowOutput" />
                      </Nodes>
                      <Edges>
                        <Edge From="0" To="1" Label="Source1" />
                        <Edge From="0" To="2" Label="Source1" />
                        <Edge From="1" To="3" Label="Source1" />
                        <Edge From="2" To="3" Label="Source2" />
                        <Edge From="3" To="4" Label="Source1" />
                        <Edge From="4" To="5" Label="Source1" />
                        <Edge From="5" To="6" Label="Source1" />
                      </Edges>
                    </Workflow>
                  </Expression>
                  <Expression xsi:type="SelectMany">
                    <Name>Create_Discrete_Uniform</Name>
                    <Workflow>
                      <Nodes>
                        <Expression xsi:type="Combinator">
                          <Combinator xsi:type="p2:CreateDiscreteUniform">
                            <p2:Lower>0</p2:Lower>
                            <p2:Upper>1</p2:Upper>
                          </Combinator>
                        </Expression>
                        <Expression xsi:type="Combinator">
                          <Combinator xsi:type="p2:Sample" />
                        </Expression>
                        <Expression xsi:type="Combinator">
                          <Combinator xsi:type="rx:Take">
                            <rx:Count>1</rx:Count>
                          </Combinator>
                        </Expression>
                        <Expression xsi:type="WorkflowOutput" />
                      </Nodes>
                      <Edges>
                        <Edge From="0" To="1" Label="Source1" />
                        <Edge From="1" To="2" Label="Source1" />
                        <Edge From="2" To="3" Label="Source1" />
                      </Edges>
                    </Workflow>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="rx:Take">
                      <rx:Count>1</rx:Count>
                    </Combinator>
                  </Expression>
                  <Expression xsi:type="Condition">
                    <Workflow>
                      <Nodes>
                        <Expression xsi:type="WorkflowInput">
                          <Name>Source1</Name>
                        </Expression>
                        <Expression xsi:type="Equal">
                          <Operand xsi:type="IntProperty">
                            <Value>0</Value>
                          </Operand>
                        </Expression>
                        <Expression xsi:type="WorkflowOutput" />
                      </Nodes>
                      <Edges>
                        <Edge From="0" To="1" Label="Source1" />
                        <Edge From="1" To="2" Label="Source1" />
                      </Edges>
                    </Workflow>
                  </Expression>
                  <Expression xsi:type="SelectMany">
                    <Name>4Khz</Name>
                    <Workflow>
                      <Nodes>
                        <Expression xsi:type="SubscribeSubject">
                          <Name>4kHz</Name>
                        </Expression>
                        <Expression xsi:type="MulticastSubject">
                          <Name>Freq</Name>
                        </Expression>
                        <Expression xsi:type="SubscribeSubject">
                          <Name>ToneDur</Name>
                        </Expression>
                        <Expression xsi:type="PropertyMapping">
                          <PropertyMappings>
                            <Property Name="DueTime" />
                          </PropertyMappings>
                        </Expression>
                        <Expression xsi:type="Combinator">
                          <Combinator xsi:type="rx:Delay">
                            <rx:DueTime>PT0.3S</rx:DueTime>
                          </Combinator>
                        </Expression>
                        <Expression xsi:type="Combinator">
                          <Combinator xsi:type="IntProperty">
                            <Value>3</Value>
                          </Combinator>
                        </Expression>
                        <Expression xsi:type="MulticastSubject">
                          <Name>StopSound</Name>
                        </Expression>
                        <Expression xsi:type="Combinator">
                          <Combinator xsi:type="IntProperty">
                            <Value>4</Value>
                          </Combinator>
                        </Expression>
                        <Expression xsi:type="MulticastSubject">
                          <Name>Tone</Name>
                        </Expression>
                        <Expression xsi:type="Combinator">
                          <Combinator xsi:type="rx:Take">
                            <rx:Count>1</rx:Count>
                          </Combinator>
                        </Expression>
                        <Expression xsi:type="WorkflowOutput" />
                      </Nodes>
                      <Edges>
                        <Edge From="0" To="1" Label="Source1" />
                        <Edge From="1" To="4" Label="Source1" />
                        <Edge From="2" To="3" Label="Source1" />
                        <Edge From="3" To="4" Label="Source2" />
                        <Edge From="4" To="5" Label="Source1" />
                        <Edge From="5" To="6" Label="Source1" />
                        <Edge From="6" To="7" Label="Source1" />
                        <Edge From="7" To="8" Label="Source1" />
                        <Edge From="8" To="9" Label="Source1" />
                        <Edge From="9" To="10" Label="Source1" />
                      </Edges>
                    </Workflow>
                  </Expression>
                  <Expression xsi:type="Condition">
                    <Workflow>
                      <Nodes>
                        <Expression xsi:type="WorkflowInput">
                          <Name>Source1</Name>
                        </Expression>
                        <Expression xsi:type="Equal">
                          <Operand xsi:type="IntProperty">
                            <Value>1</Value>
                          </Operand>
                        </Expression>
                        <Expression xsi:type="WorkflowOutput" />
                      </Nodes>
                      <Edges>
                        <Edge From="0" To="1" Label="Source1" />
                        <Edge From="1" To="2" Label="Source1" />
                      </Edges>
                    </Workflow>
                  </Expression>
                  <Expression xsi:type="SelectMany">
                    <Name>16kHz</Name>
                    <Workflow>
                      <Nodes>
                        <Expression xsi:type="SubscribeSubject">
                          <Name>16kHz</Name>
                        </Expression>
                        <Expression xsi:type="MulticastSubject">
                          <Name>Freq</Name>
                        </Expression>
                        <Expression xsi:type="SubscribeSubject">
                          <Name>ToneDur</Name>
                        </Expression>
                        <Expression xsi:type="PropertyMapping">
                          <PropertyMappings>
                            <Property Name="DueTime" />
                          </PropertyMappings>
                        </Expression>
                        <Expression xsi:type="Combinator">
                          <Combinator xsi:type="rx:Delay">
                            <rx:DueTime>PT0.3S</rx:DueTime>
                          </Combinator>
                        </Expression>
                        <Expression xsi:type="Combinator">
                          <Combinator xsi:type="IntProperty">
                            <Value>3</Value>
                          </Combinator>
                        </Expression>
                        <Expression xsi:type="MulticastSubject">
                          <Name>StopSound</Name>
                        </Expression>
                        <Expression xsi:type="Combinator">
                          <Combinator xsi:type="IntProperty">
                            <Value>16</Value>
                          </Combinator>
                        </Expression>
                        <Expression xsi:type="MulticastSubject">
                          <Name>Tone</Name>
                        </Expression>
                        <Expression xsi:type="Combinator">
                          <Combinator xsi:type="rx:Take">
                            <rx:Count>1</rx:Count>
                          </Combinator>
                        </Expression>
                        <Expression xsi:type="WorkflowOutput" />
                      </Nodes>
                      <Edges>
                        <Edge From="0" To="1" Label="Source1" />
                        <Edge From="1" To="4" Label="Source1" />
                        <Edge From="2" To="3" Label="Source1" />
                        <Edge From="3" To="4" Label="Source2" />
                        <Edge From="4" To="5" Label="Source1" />
                        <Edge From="5" To="6" Label="Source1" />
                        <Edge From="6" To="7" Label="Source1" />
                        <Edge From="7" To="8" Label="Source1" />
                        <Edge From="8" To="9" Label="Source1" />
                        <Edge From="9" To="10" Label="Source1" />
                      </Edges>
                    </Workflow>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="rx:Merge" />
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="rx:Take">
                      <rx:Count>1</rx:Count>
                    </Combinator>
                  </Expression>
                  <Expression xsi:type="WorkflowOutput" />
                </Nodes>
                <Edges>
                  <Edge From="0" To="1" Label="Source1" />
                  <Edge From="1" To="2" Label="Source1" />
                  <Edge From="1" To="4" Label="Source1" />
                  <Edge From="1" To="6" Label="Source1" />
                  <Edge From="2" To="3" Label="Source1" />
                  <Edge From="3" To="13" Label="Source4" />
                  <Edge From="4" To="5" Label="Source1" />
                  <Edge From="5" To="13" Label="Source3" />
                  <Edge From="6" To="7" Label="Source1" />
                  <Edge From="7" To="8" Label="Source1" />
                  <Edge From="8" To="9" Label="Source1" />
                  <Edge From="8" To="11" Label="Source1" />
                  <Edge From="9" To="10" Label="Source1" />
                  <Edge From="10" To="13" Label="Source1" />
                  <Edge From="11" To="12" Label="Source1" />
                  <Edge From="12" To="13" Label="Source2" />
                  <Edge From="13" To="14" Label="Source1" />
                  <Edge From="14" To="15" Label="Source1" />
                </Edges>
              </Workflow>
            </Expression>
            <Expression xsi:type="SelectMany">
              <Name>GoCue</Name>
              <Workflow>
                <Nodes>
                  <Expression xsi:type="WorkflowInput">
                    <Name>Source1</Name>
                  </Expression>
                  <Expression xsi:type="SubscribeSubject">
                    <Name>GoCueDur</Name>
                  </Expression>
                  <Expression xsi:type="PropertyMapping">
                    <PropertyMappings>
                      <Property Name="DueTime" />
                    </PropertyMappings>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="rx:Delay">
                      <rx:DueTime>PT0.3S</rx:DueTime>
                    </Combinator>
                  </Expression>
                  <Expression xsi:type="WorkflowOutput" />
                </Nodes>
                <Edges>
                  <Edge From="0" To="3" Label="Source1" />
                  <Edge From="1" To="2" Label="Source1" />
                  <Edge From="2" To="3" Label="Source2" />
                  <Edge From="3" To="4" Label="Source1" />
                </Edges>
              </Workflow>
            </Expression>
            <Expression xsi:type="SelectMany">
              <Name>Response</Name>
              <Workflow>
                <Nodes>
                  <Expression xsi:type="SubscribeSubject">
                    <Name>Beam1Bool</Name>
                  </Expression>
                  <Expression xsi:type="Condition">
                    <Workflow>
                      <Nodes>
                        <Expression xsi:type="WorkflowInput">
                          <Name>Source1</Name>
                        </Expression>
                        <Expression xsi:type="BitwiseNot" />
                        <Expression xsi:type="WorkflowOutput" />
                      </Nodes>
                      <Edges>
                        <Edge From="0" To="1" Label="Source1" />
                        <Edge From="1" To="2" Label="Source1" />
                      </Edges>
                    </Workflow>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="IntProperty">
                      <Value>4</Value>
                    </Combinator>
                  </Expression>
                  <Expression xsi:type="SubscribeSubject">
                    <Name>Beam2Bool</Name>
                  </Expression>
                  <Expression xsi:type="Condition">
                    <Workflow>
                      <Nodes>
                        <Expression xsi:type="WorkflowInput">
                          <Name>Source1</Name>
                        </Expression>
                        <Expression xsi:type="BitwiseNot" />
                        <Expression xsi:type="WorkflowOutput" />
                      </Nodes>
                      <Edges>
                        <Edge From="0" To="1" Label="Source1" />
                        <Edge From="1" To="2" Label="Source1" />
                      </Edges>
                    </Workflow>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="IntProperty">
                      <Value>16</Value>
                    </Combinator>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="rx:Merge" />
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="rx:Take">
                      <rx:Count>1</rx:Count>
                    </Combinator>
                  </Expression>
                  <Expression xsi:type="Sink">
                    <Name>ResetSpouts</Name>
                    <Workflow>
                      <Nodes>
                        <Expression xsi:type="SubscribeSubject">
                          <Name>Beam1Bool</Name>
                        </Expression>
                        <Expression xsi:type="Condition">
                          <Workflow>
                            <Nodes>
                              <Expression xsi:type="WorkflowInput">
                                <Name>Source1</Name>
                              </Expression>
                              <Expression xsi:type="BitwiseNot" />
                              <Expression xsi:type="WorkflowOutput" />
                            </Nodes>
                            <Edges>
                              <Edge From="0" To="1" Label="Source1" />
                              <Edge From="1" To="2" Label="Source1" />
                            </Edges>
                          </Workflow>
                        </Expression>
                        <Expression xsi:type="Combinator">
                          <Combinator xsi:type="BooleanProperty">
                            <Value>true</Value>
                          </Combinator>
                        </Expression>
                        <Expression xsi:type="MulticastSubject">
                          <Name>Beam1Bool</Name>
                        </Expression>
                        <Expression xsi:type="SubscribeSubject">
                          <Name>Beam2Bool</Name>
                        </Expression>
                        <Expression xsi:type="Condition">
                          <Workflow>
                            <Nodes>
                              <Expression xsi:type="WorkflowInput">
                                <Name>Source1</Name>
                              </Expression>
                              <Expression xsi:type="BitwiseNot" />
                              <Expression xsi:type="WorkflowOutput" />
                            </Nodes>
                            <Edges>
                              <Edge From="0" To="1" Label="Source1" />
                              <Edge From="1" To="2" Label="Source1" />
                            </Edges>
                          </Workflow>
                        </Expression>
                        <Expression xsi:type="Combinator">
                          <Combinator xsi:type="BooleanProperty">
                            <Value>true</Value>
                          </Combinator>
                        </Expression>
                        <Expression xsi:type="MulticastSubject">
                          <Name>Beam2Bool</Name>
                        </Expression>
                      </Nodes>
                      <Edges>
                        <Edge From="0" To="1" Label="Source1" />
                        <Edge From="1" To="2" Label="Source1" />
                        <Edge From="2" To="3" Label="Source1" />
                        <Edge From="4" To="5" Label="Source1" />
                        <Edge From="5" To="6" Label="Source1" />
                        <Edge From="6" To="7" Label="Source1" />
                      </Edges>
                    </Workflow>
                  </Expression>
                  <Expression xsi:type="Sink">
                    <Name>RecordFirstLick</Name>
                    <Workflow>
                      <Nodes>
                        <Expression xsi:type="WorkflowInput">
                          <Name>Source1</Name>
                        </Expression>
                        <Expression xsi:type="MulticastSubject">
                          <Name>FirstLick</Name>
                        </Expression>
                        <Expression xsi:type="WorkflowOutput" />
                      </Nodes>
                      <Edges>
                        <Edge From="0" To="1" Label="Source1" />
                        <Edge From="1" To="2" Label="Source1" />
                      </Edges>
                    </Workflow>
                  </Expression>
                  <Expression xsi:type="Disable">
                    <Builder xsi:type="Sink">
                      <Name>Count_%_Right_Licks</Name>
                      <Workflow>
                        <Nodes>
                          <Expression xsi:type="WorkflowInput">
                            <Name>Source1</Name>
                          </Expression>
                          <Expression xsi:type="MulticastSubject">
                            <Name>FirstLick</Name>
                          </Expression>
                          <Expression xsi:type="Condition">
                            <Workflow>
                              <Nodes>
                                <Expression xsi:type="WorkflowInput">
                                  <Name>Source1</Name>
                                </Expression>
                                <Expression xsi:type="Equal">
                                  <Operand xsi:type="IntProperty">
                                    <Value>4</Value>
                                  </Operand>
                                </Expression>
                                <Expression xsi:type="WorkflowOutput" />
                              </Nodes>
                              <Edges>
                                <Edge From="0" To="1" Label="Source1" />
                                <Edge From="1" To="2" Label="Source1" />
                              </Edges>
                            </Workflow>
                          </Expression>
                          <Expression xsi:type="Combinator">
                            <Combinator xsi:type="IntProperty">
                              <Value>0</Value>
                            </Combinator>
                          </Expression>
                          <Expression xsi:type="Condition">
                            <Workflow>
                              <Nodes>
                                <Expression xsi:type="WorkflowInput">
                                  <Name>Source1</Name>
                                </Expression>
                                <Expression xsi:type="Equal">
                                  <Operand xsi:type="IntProperty">
                                    <Value>16</Value>
                                  </Operand>
                                </Expression>
                                <Expression xsi:type="WorkflowOutput" />
                              </Nodes>
                              <Edges>
                                <Edge From="0" To="1" Label="Source1" />
                                <Edge From="1" To="2" Label="Source1" />
                              </Edges>
                            </Workflow>
                          </Expression>
                          <Expression xsi:type="Combinator">
                            <Combinator xsi:type="IntProperty">
                              <Value>1</Value>
                            </Combinator>
                          </Expression>
                          <Expression xsi:type="Combinator">
                            <Combinator xsi:type="rx:Merge" />
                          </Expression>
                          <Expression xsi:type="Combinator">
                            <Combinator xsi:type="dsp:Buffer">
                              <dsp:Count>3</dsp:Count>
                              <dsp:Skip>1</dsp:Skip>
                            </Combinator>
                          </Expression>
                          <Expression xsi:type="Combinator">
                            <Combinator xsi:type="dsp:Sum" />
                          </Expression>
                          <Expression xsi:type="MemberSelector">
                            <Selector>Val0</Selector>
                          </Expression>
                          <Expression xsi:type="Divide">
                            <Operand xsi:type="DoubleProperty">
                              <Value>10</Value>
                            </Operand>
                          </Expression>
                          <Expression xsi:type="MulticastSubject">
                            <Name>%_Right_Licks</Name>
                          </Expression>
                          <Expression xsi:type="WorkflowOutput" />
                        </Nodes>
                        <Edges>
                          <Edge From="0" To="1" Label="Source1" />
                          <Edge From="1" To="2" Label="Source1" />
                          <Edge From="1" To="4" Label="Source1" />
                          <Edge From="2" To="3" Label="Source1" />
                          <Edge From="3" To="6" Label="Source1" />
                          <Edge From="4" To="5" Label="Source1" />
                          <Edge From="5" To="6" Label="Source2" />
                          <Edge From="6" To="7" Label="Source1" />
                          <Edge From="7" To="8" Label="Source1" />
                          <Edge From="8" To="9" Label="Source1" />
                          <Edge From="9" To="10" Label="Source1" />
                          <Edge From="10" To="11" Label="Source1" />
                          <Edge From="11" To="12" Label="Source1" />
                        </Edges>
                      </Workflow>
                    </Builder>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="rx:Take">
                      <rx:Count>1</rx:Count>
                    </Combinator>
                  </Expression>
                  <Expression xsi:type="SubscribeSubject">
                    <Name>Tone</Name>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="rx:Zip" />
                  </Expression>
                  <Expression xsi:type="Equal" />
                  <Expression xsi:type="MulticastSubject">
                    <Name>Correct</Name>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="rx:Take">
                      <rx:Count>1</rx:Count>
                    </Combinator>
                  </Expression>
                  <Expression xsi:type="Condition">
                    <Workflow>
                      <Nodes>
                        <Expression xsi:type="WorkflowInput">
                          <Name>Source1</Name>
                        </Expression>
                        <Expression xsi:type="WorkflowOutput" />
                      </Nodes>
                      <Edges>
                        <Edge From="0" To="1" Label="Source1" />
                      </Edges>
                    </Workflow>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="IntProperty">
                      <Value>1</Value>
                    </Combinator>
                  </Expression>
                  <Expression xsi:type="SubscribeSubject">
                    <Name>CorrectCount</Name>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="rx:Zip" />
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="rx:Take">
                      <rx:Count>1</rx:Count>
                    </Combinator>
                  </Expression>
                  <Expression xsi:type="Add" />
                  <Expression xsi:type="Condition">
                    <Workflow>
                      <Nodes>
                        <Expression xsi:type="WorkflowInput">
                          <Name>Source1</Name>
                        </Expression>
                        <Expression xsi:type="BitwiseNot" />
                        <Expression xsi:type="WorkflowOutput" />
                      </Nodes>
                      <Edges>
                        <Edge From="0" To="1" Label="Source1" />
                        <Edge From="1" To="2" Label="Source1" />
                      </Edges>
                    </Workflow>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="IntProperty">
                      <Value>0</Value>
                    </Combinator>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="rx:Zip" />
                  </Expression>
                  <Expression xsi:type="Add" />
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="rx:Merge" />
                  </Expression>
                  <Expression xsi:type="MulticastSubject">
                    <Name>CorrectCount</Name>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="rx:Zip" />
                  </Expression>
                  <Expression xsi:type="MemberSelector">
                    <Selector>Item1</Selector>
                  </Expression>
                  <Expression xsi:type="WorkflowOutput" />
                </Nodes>
                <Edges>
                  <Edge From="0" To="1" Label="Source1" />
                  <Edge From="1" To="2" Label="Source1" />
                  <Edge From="2" To="6" Label="Source1" />
                  <Edge From="3" To="4" Label="Source1" />
                  <Edge From="4" To="5" Label="Source1" />
                  <Edge From="5" To="6" Label="Source2" />
                  <Edge From="6" To="7" Label="Source1" />
                  <Edge From="7" To="8" Label="Source1" />
                  <Edge From="8" To="9" Label="Source1" />
                  <Edge From="9" To="10" Label="Source1" />
                  <Edge From="10" To="11" Label="Source1" />
                  <Edge From="11" To="13" Label="Source2" />
                  <Edge From="12" To="13" Label="Source1" />
                  <Edge From="13" To="14" Label="Source1" />
                  <Edge From="14" To="15" Label="Source1" />
                  <Edge From="15" To="16" Label="Source1" />
                  <Edge From="15" To="17" Label="Source1" />
                  <Edge From="15" To="23" Label="Source1" />
                  <Edge From="16" To="29" Label="Source1" />
                  <Edge From="17" To="18" Label="Source1" />
                  <Edge From="18" To="20" Label="Source1" />
                  <Edge From="19" To="20" Label="Source2" />
                  <Edge From="19" To="25" Label="Source2" />
                  <Edge From="20" To="21" Label="Source1" />
                  <Edge From="21" To="22" Label="Source1" />
                  <Edge From="22" To="27" Label="Source1" />
                  <Edge From="23" To="24" Label="Source1" />
                  <Edge From="24" To="25" Label="Source1" />
                  <Edge From="25" To="26" Label="Source1" />
                  <Edge From="26" To="27" Label="Source2" />
                  <Edge From="27" To="28" Label="Source1" />
                  <Edge From="28" To="29" Label="Source2" />
                  <Edge From="29" To="30" Label="Source1" />
                  <Edge From="30" To="31" Label="Source1" />
                </Edges>
              </Workflow>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="BooleanProperty">
                <Value>false</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="MulticastSubject">
              <Name>AbortTrial</Name>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>ResponseWindow</Name>
            </Expression>
            <Expression xsi:type="PropertyMapping">
              <PropertyMappings>
                <Property Name="DueTime" />
              </PropertyMappings>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:Delay">
                <rx:DueTime>PT1M</rx:DueTime>
              </Combinator>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="BooleanProperty">
                <Value>true</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="MulticastSubject">
              <Name>AbortTrial</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:Merge" />
            </Expression>
            <Expression xsi:type="Condition">
              <Workflow>
                <Nodes>
                  <Expression xsi:type="WorkflowInput">
                    <Name>Source1</Name>
                  </Expression>
                  <Expression xsi:type="BitwiseNot" />
                  <Expression xsi:type="WorkflowOutput" />
                </Nodes>
                <Edges>
                  <Edge From="0" To="1" Label="Source1" />
                  <Edge From="1" To="2" Label="Source1" />
                </Edges>
              </Workflow>
            </Expression>
            <Expression xsi:type="SelectMany">
              <Name>Feedback</Name>
              <Workflow>
                <Nodes>
                  <Expression xsi:type="SubscribeSubject">
                    <Name>Correct</Name>
                  </Expression>
                  <Expression xsi:type="Condition">
                    <Name>Yes</Name>
                    <Workflow>
                      <Nodes>
                        <Expression xsi:type="WorkflowInput">
                          <Name>Source1</Name>
                        </Expression>
                        <Expression xsi:type="WorkflowOutput" />
                      </Nodes>
                      <Edges>
                        <Edge From="0" To="1" Label="Source1" />
                      </Edges>
                    </Workflow>
                  </Expression>
                  <Expression xsi:type="SelectMany">
                    <Name>Success</Name>
                    <Workflow>
                      <Nodes>
                        <Expression xsi:type="SubscribeSubject">
                          <Name>FirstLick</Name>
                        </Expression>
                        <Expression xsi:type="Condition">
                          <Workflow>
                            <Nodes>
                              <Expression xsi:type="WorkflowInput">
                                <Name>Source1</Name>
                              </Expression>
                              <Expression xsi:type="Equal">
                                <Operand xsi:type="IntProperty">
                                  <Value>16</Value>
                                </Operand>
                              </Expression>
                              <Expression xsi:type="WorkflowOutput" />
                            </Nodes>
                            <Edges>
                              <Edge From="0" To="1" Label="Source1" />
                              <Edge From="1" To="2" Label="Source1" />
                            </Edges>
                          </Workflow>
                        </Expression>
                        <Expression xsi:type="SelectMany">
                          <Name>RewardRight</Name>
                          <Workflow>
                            <Nodes>
                              <Expression xsi:type="WorkflowInput">
                                <Name>Source1</Name>
                              </Expression>
                              <Expression xsi:type="Disable">
                                <Builder xsi:type="SelectMany">
                                  <Name>RewardTone</Name>
                                  <Description>SoundCard</Description>
                                  <Workflow>
                                    <Nodes>
                                      <Expression xsi:type="SubscribeSubject">
                                        <Name>RewardDur</Name>
                                      </Expression>
                                      <Expression xsi:type="PropertyMapping">
                                        <PropertyMappings>
                                          <Property Name="DueTime" />
                                        </PropertyMappings>
                                      </Expression>
                                      <Expression xsi:type="WorkflowInput">
                                        <Name>Source1</Name>
                                      </Expression>
                                      <Expression xsi:type="ExternalizedMapping">
                                        <Property Name="SoundLevel" />
                                      </Expression>
                                      <Expression xsi:type="Sink">
                                        <Name>SetLevel</Name>
                                        <Workflow>
                                          <Nodes>
                                            <Expression xsi:type="ExternalizedMapping">
                                              <Property Name="Value" DisplayName="SoundLevel" />
                                            </Expression>
                                            <Expression xsi:type="WorkflowInput">
                                              <Name>Source1</Name>
                                            </Expression>
                                            <Expression xsi:type="Combinator">
                                              <Combinator xsi:type="IntProperty">
                                                <Value>80</Value>
                                              </Combinator>
                                            </Expression>
                                            <Expression xsi:type="scr:ExpressionTransform">
                                              <scr:Expression>(it-107.54)/-0.0764</scr:Expression>
                                            </Expression>
                                            <Expression xsi:type="PropertyMapping">
                                              <PropertyMappings>
                                                <Property Name="Value" />
                                              </PropertyMappings>
                                            </Expression>
                                            <Expression xsi:type="Combinator">
                                              <Combinator xsi:type="IntProperty">
                                                <Value>360</Value>
                                              </Combinator>
                                            </Expression>
                                            <Expression xsi:type="Sink">
                                              <Name>Left</Name>
                                              <Workflow>
                                                <Nodes>
                                                  <Expression xsi:type="WorkflowInput">
                                                    <Name>Source1</Name>
                                                  </Expression>
                                                  <Expression xsi:type="Combinator">
                                                    <Combinator xsi:type="harp:CreateHarpMessage">
                                                      <harp:MessageType>Write</harp:MessageType>
                                                      <harp:Address>34</harp:Address>
                                                      <harp:PayloadType>U16</harp:PayloadType>
                                                      <harp:Payload>0</harp:Payload>
                                                    </Combinator>
                                                  </Expression>
                                                  <Expression xsi:type="MulticastSubject">
                                                    <Name>PlaySound</Name>
                                                  </Expression>
                                                  <Expression xsi:type="WorkflowOutput" />
                                                </Nodes>
                                                <Edges>
                                                  <Edge From="0" To="1" Label="Source1" />
                                                  <Edge From="1" To="2" Label="Source1" />
                                                  <Edge From="2" To="3" Label="Source1" />
                                                </Edges>
                                              </Workflow>
                                            </Expression>
                                            <Expression xsi:type="Sink">
                                              <Name>Right</Name>
                                              <Workflow>
                                                <Nodes>
                                                  <Expression xsi:type="WorkflowInput">
                                                    <Name>Source1</Name>
                                                  </Expression>
                                                  <Expression xsi:type="Combinator">
                                                    <Combinator xsi:type="harp:CreateHarpMessage">
                                                      <harp:MessageType>Write</harp:MessageType>
                                                      <harp:Address>35</harp:Address>
                                                      <harp:PayloadType>U16</harp:PayloadType>
                                                      <harp:Payload>0</harp:Payload>
                                                    </Combinator>
                                                  </Expression>
                                                  <Expression xsi:type="MulticastSubject">
                                                    <Name>PlaySound</Name>
                                                  </Expression>
                                                  <Expression xsi:type="WorkflowOutput" />
                                                </Nodes>
                                                <Edges>
                                                  <Edge From="0" To="1" Label="Source1" />
                                                  <Edge From="1" To="2" Label="Source1" />
                                                  <Edge From="2" To="3" Label="Source1" />
                                                </Edges>
                                              </Workflow>
                                            </Expression>
                                            <Expression xsi:type="WorkflowOutput" />
                                          </Nodes>
                                          <Edges>
                                            <Edge From="0" To="2" Label="Source2" />
                                            <Edge From="1" To="2" Label="Source1" />
                                            <Edge From="2" To="3" Label="Source1" />
                                            <Edge From="3" To="4" Label="Source1" />
                                            <Edge From="4" To="5" Label="Source1" />
                                            <Edge From="5" To="6" Label="Source1" />
                                            <Edge From="6" To="7" Label="Source1" />
                                            <Edge From="7" To="8" Label="Source1" />
                                          </Edges>
                                        </Workflow>
                                      </Expression>
                                      <Expression xsi:type="SubscribeSubject">
                                        <Name>RewardID</Name>
                                      </Expression>
                                      <Expression xsi:type="PropertyMapping">
                                        <PropertyMappings>
                                          <Property Name="Value" />
                                        </PropertyMappings>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="IntProperty">
                                          <Value>5</Value>
                                        </Combinator>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:Take">
                                          <rx:Count>1</rx:Count>
                                        </Combinator>
                                      </Expression>
                                      <Expression xsi:type="MulticastSubject">
                                        <Name>SoundIndex</Name>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:Timestamp" />
                                      </Expression>
                                      <Expression xsi:type="MemberSelector">
                                        <Selector>Timestamp.TimeOfDay</Selector>
                                      </Expression>
                                      <Expression xsi:type="MulticastSubject">
                                        <Name>RewardToneTime</Name>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:Delay">
                                          <rx:DueTime>PT0.8S</rx:DueTime>
                                        </Combinator>
                                      </Expression>
                                      <Expression xsi:type="WorkflowOutput" />
                                    </Nodes>
                                    <Edges>
                                      <Edge From="0" To="1" Label="Source1" />
                                      <Edge From="1" To="13" Label="Source2" />
                                      <Edge From="2" To="4" Label="Source2" />
                                      <Edge From="3" To="4" Label="Source2" />
                                      <Edge From="4" To="7" Label="Source1" />
                                      <Edge From="5" To="6" Label="Source1" />
                                      <Edge From="6" To="7" Label="Source2" />
                                      <Edge From="7" To="8" Label="Source1" />
                                      <Edge From="8" To="9" Label="Source1" />
                                      <Edge From="9" To="10" Label="Source1" />
                                      <Edge From="10" To="11" Label="Source1" />
                                      <Edge From="11" To="12" Label="Source1" />
                                      <Edge From="12" To="13" Label="Source1" />
                                      <Edge From="13" To="14" Label="Source1" />
                                    </Edges>
                                  </Workflow>
                                </Builder>
                              </Expression>
                              <Expression xsi:type="p1:BehaviorCommand">
                                <p1:Type>SetOutput</p1:Type>
                                <p1:Mask>Poke2Valve</p1:Mask>
                              </Expression>
                              <Expression xsi:type="MulticastSubject">
                                <Name>BehModule</Name>
                              </Expression>
                              <Expression xsi:type="SubscribeSubject">
                                <Name>RightValveTime</Name>
                              </Expression>
                              <Expression xsi:type="PropertyMapping">
                                <PropertyMappings>
                                  <Property Name="DueTime" />
                                </PropertyMappings>
                              </Expression>
                              <Expression xsi:type="Combinator">
                                <Combinator xsi:type="rx:Delay">
                                  <rx:DueTime>PT0S</rx:DueTime>
                                </Combinator>
                              </Expression>
                              <Expression xsi:type="p1:BehaviorCommand">
                                <p1:Type>ClearOutput</p1:Type>
                                <p1:Mask>Poke2Valve</p1:Mask>
                              </Expression>
                              <Expression xsi:type="MulticastSubject">
                                <Name>BehModule</Name>
                              </Expression>
                              <Expression xsi:type="Combinator">
                                <Combinator xsi:type="IntProperty">
                                  <Value>1</Value>
                                </Combinator>
                              </Expression>
                              <Expression xsi:type="MulticastSubject">
                                <Name>RewSide </Name>
                              </Expression>
                              <Expression xsi:type="WorkflowOutput" />
                            </Nodes>
                            <Edges>
                              <Edge From="0" To="1" Label="Source1" />
                              <Edge From="1" To="2" Label="Source1" />
                              <Edge From="2" To="3" Label="Source1" />
                              <Edge From="3" To="6" Label="Source1" />
                              <Edge From="4" To="5" Label="Source1" />
                              <Edge From="5" To="6" Label="Source2" />
                              <Edge From="6" To="7" Label="Source1" />
                              <Edge From="7" To="8" Label="Source1" />
                              <Edge From="8" To="9" Label="Source1" />
                              <Edge From="9" To="10" Label="Source1" />
                              <Edge From="10" To="11" Label="Source1" />
                            </Edges>
                          </Workflow>
                        </Expression>
                        <Expression xsi:type="Condition">
                          <Workflow>
                            <Nodes>
                              <Expression xsi:type="WorkflowInput">
                                <Name>Source1</Name>
                              </Expression>
                              <Expression xsi:type="Equal">
                                <Operand xsi:type="IntProperty">
                                  <Value>4</Value>
                                </Operand>
                              </Expression>
                              <Expression xsi:type="WorkflowOutput" />
                            </Nodes>
                            <Edges>
                              <Edge From="0" To="1" Label="Source1" />
                              <Edge From="1" To="2" Label="Source1" />
                            </Edges>
                          </Workflow>
                        </Expression>
                        <Expression xsi:type="SelectMany">
                          <Name>RewardLeft</Name>
                          <Workflow>
                            <Nodes>
                              <Expression xsi:type="WorkflowInput">
                                <Name>Source1</Name>
                              </Expression>
                              <Expression xsi:type="Disable">
                                <Builder xsi:type="SelectMany">
                                  <Name>RewardTone</Name>
                                  <Description>SoundCard</Description>
                                  <Workflow>
                                    <Nodes>
                                      <Expression xsi:type="SubscribeSubject">
                                        <Name>RewardDur</Name>
                                      </Expression>
                                      <Expression xsi:type="PropertyMapping">
                                        <PropertyMappings>
                                          <Property Name="DueTime" />
                                        </PropertyMappings>
                                      </Expression>
                                      <Expression xsi:type="WorkflowInput">
                                        <Name>Source1</Name>
                                      </Expression>
                                      <Expression xsi:type="ExternalizedMapping">
                                        <Property Name="SoundLevel" />
                                      </Expression>
                                      <Expression xsi:type="Sink">
                                        <Name>SetLevel</Name>
                                        <Workflow>
                                          <Nodes>
                                            <Expression xsi:type="ExternalizedMapping">
                                              <Property Name="Value" DisplayName="SoundLevel" />
                                            </Expression>
                                            <Expression xsi:type="WorkflowInput">
                                              <Name>Source1</Name>
                                            </Expression>
                                            <Expression xsi:type="Combinator">
                                              <Combinator xsi:type="IntProperty">
                                                <Value>80</Value>
                                              </Combinator>
                                            </Expression>
                                            <Expression xsi:type="scr:ExpressionTransform">
                                              <scr:Expression>(it-107.54)/-0.0764</scr:Expression>
                                            </Expression>
                                            <Expression xsi:type="PropertyMapping">
                                              <PropertyMappings>
                                                <Property Name="Value" />
                                              </PropertyMappings>
                                            </Expression>
                                            <Expression xsi:type="Combinator">
                                              <Combinator xsi:type="IntProperty">
                                                <Value>360</Value>
                                              </Combinator>
                                            </Expression>
                                            <Expression xsi:type="Sink">
                                              <Name>Left</Name>
                                              <Workflow>
                                                <Nodes>
                                                  <Expression xsi:type="WorkflowInput">
                                                    <Name>Source1</Name>
                                                  </Expression>
                                                  <Expression xsi:type="Combinator">
                                                    <Combinator xsi:type="harp:CreateHarpMessage">
                                                      <harp:MessageType>Write</harp:MessageType>
                                                      <harp:Address>34</harp:Address>
                                                      <harp:PayloadType>U16</harp:PayloadType>
                                                      <harp:Payload>0</harp:Payload>
                                                    </Combinator>
                                                  </Expression>
                                                  <Expression xsi:type="MulticastSubject">
                                                    <Name>PlaySound</Name>
                                                  </Expression>
                                                  <Expression xsi:type="WorkflowOutput" />
                                                </Nodes>
                                                <Edges>
                                                  <Edge From="0" To="1" Label="Source1" />
                                                  <Edge From="1" To="2" Label="Source1" />
                                                  <Edge From="2" To="3" Label="Source1" />
                                                </Edges>
                                              </Workflow>
                                            </Expression>
                                            <Expression xsi:type="Sink">
                                              <Name>Right</Name>
                                              <Workflow>
                                                <Nodes>
                                                  <Expression xsi:type="WorkflowInput">
                                                    <Name>Source1</Name>
                                                  </Expression>
                                                  <Expression xsi:type="Combinator">
                                                    <Combinator xsi:type="harp:CreateHarpMessage">
                                                      <harp:MessageType>Write</harp:MessageType>
                                                      <harp:Address>35</harp:Address>
                                                      <harp:PayloadType>U16</harp:PayloadType>
                                                      <harp:Payload>0</harp:Payload>
                                                    </Combinator>
                                                  </Expression>
                                                  <Expression xsi:type="MulticastSubject">
                                                    <Name>PlaySound</Name>
                                                  </Expression>
                                                  <Expression xsi:type="WorkflowOutput" />
                                                </Nodes>
                                                <Edges>
                                                  <Edge From="0" To="1" Label="Source1" />
                                                  <Edge From="1" To="2" Label="Source1" />
                                                  <Edge From="2" To="3" Label="Source1" />
                                                </Edges>
                                              </Workflow>
                                            </Expression>
                                            <Expression xsi:type="WorkflowOutput" />
                                          </Nodes>
                                          <Edges>
                                            <Edge From="0" To="2" Label="Source2" />
                                            <Edge From="1" To="2" Label="Source1" />
                                            <Edge From="2" To="3" Label="Source1" />
                                            <Edge From="3" To="4" Label="Source1" />
                                            <Edge From="4" To="5" Label="Source1" />
                                            <Edge From="5" To="6" Label="Source1" />
                                            <Edge From="6" To="7" Label="Source1" />
                                            <Edge From="7" To="8" Label="Source1" />
                                          </Edges>
                                        </Workflow>
                                      </Expression>
                                      <Expression xsi:type="SubscribeSubject">
                                        <Name>RewardID</Name>
                                      </Expression>
                                      <Expression xsi:type="PropertyMapping">
                                        <PropertyMappings>
                                          <Property Name="Value" />
                                        </PropertyMappings>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="IntProperty">
                                          <Value>5</Value>
                                        </Combinator>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:Take">
                                          <rx:Count>1</rx:Count>
                                        </Combinator>
                                      </Expression>
                                      <Expression xsi:type="MulticastSubject">
                                        <Name>SoundIndex</Name>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:Timestamp" />
                                      </Expression>
                                      <Expression xsi:type="MemberSelector">
                                        <Selector>Timestamp.TimeOfDay</Selector>
                                      </Expression>
                                      <Expression xsi:type="MulticastSubject">
                                        <Name>RewardToneTime</Name>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:Delay">
                                          <rx:DueTime>PT0.8S</rx:DueTime>
                                        </Combinator>
                                      </Expression>
                                      <Expression xsi:type="WorkflowOutput" />
                                    </Nodes>
                                    <Edges>
                                      <Edge From="0" To="1" Label="Source1" />
                                      <Edge From="1" To="13" Label="Source2" />
                                      <Edge From="2" To="4" Label="Source2" />
                                      <Edge From="3" To="4" Label="Source2" />
                                      <Edge From="4" To="7" Label="Source1" />
                                      <Edge From="5" To="6" Label="Source1" />
                                      <Edge From="6" To="7" Label="Source2" />
                                      <Edge From="7" To="8" Label="Source1" />
                                      <Edge From="8" To="9" Label="Source1" />
                                      <Edge From="9" To="10" Label="Source1" />
                                      <Edge From="10" To="11" Label="Source1" />
                                      <Edge From="11" To="12" Label="Source1" />
                                      <Edge From="12" To="13" Label="Source1" />
                                      <Edge From="13" To="14" Label="Source1" />
                                    </Edges>
                                  </Workflow>
                                </Builder>
                              </Expression>
                              <Expression xsi:type="p1:BehaviorCommand">
                                <p1:Type>SetOutput</p1:Type>
                                <p1:Mask>Poke1Valve</p1:Mask>
                              </Expression>
                              <Expression xsi:type="MulticastSubject">
                                <Name>BehModule</Name>
                              </Expression>
                              <Expression xsi:type="SubscribeSubject">
                                <Name>LeftValveTime</Name>
                              </Expression>
                              <Expression xsi:type="PropertyMapping">
                                <PropertyMappings>
                                  <Property Name="DueTime" />
                                </PropertyMappings>
                              </Expression>
                              <Expression xsi:type="Combinator">
                                <Combinator xsi:type="rx:Delay">
                                  <rx:DueTime>PT0S</rx:DueTime>
                                </Combinator>
                              </Expression>
                              <Expression xsi:type="p1:BehaviorCommand">
                                <p1:Type>ClearOutput</p1:Type>
                                <p1:Mask>Poke1Valve</p1:Mask>
                              </Expression>
                              <Expression xsi:type="MulticastSubject">
                                <Name>BehModule</Name>
                              </Expression>
                              <Expression xsi:type="Combinator">
                                <Combinator xsi:type="IntProperty">
                                  <Value>0</Value>
                                </Combinator>
                              </Expression>
                              <Expression xsi:type="MulticastSubject">
                                <Name>RewSide </Name>
                              </Expression>
                              <Expression xsi:type="WorkflowOutput" />
                            </Nodes>
                            <Edges>
                              <Edge From="0" To="1" Label="Source1" />
                              <Edge From="1" To="2" Label="Source1" />
                              <Edge From="2" To="3" Label="Source1" />
                              <Edge From="3" To="6" Label="Source1" />
                              <Edge From="4" To="5" Label="Source1" />
                              <Edge From="5" To="6" Label="Source2" />
                              <Edge From="6" To="7" Label="Source1" />
                              <Edge From="7" To="8" Label="Source1" />
                              <Edge From="8" To="9" Label="Source1" />
                              <Edge From="9" To="10" Label="Source1" />
                              <Edge From="10" To="11" Label="Source1" />
                            </Edges>
                          </Workflow>
                        </Expression>
                        <Expression xsi:type="Combinator">
                          <Combinator xsi:type="rx:Merge" />
                        </Expression>
                        <Expression xsi:type="WorkflowOutput" />
                      </Nodes>
                      <Edges>
                        <Edge From="0" To="1" Label="Source1" />
                        <Edge From="0" To="3" Label="Source1" />
                        <Edge From="1" To="2" Label="Source1" />
                        <Edge From="2" To="5" Label="Source2" />
                        <Edge From="3" To="4" Label="Source1" />
                        <Edge From="4" To="5" Label="Source1" />
                        <Edge From="5" To="6" Label="Source1" />
                      </Edges>
                    </Workflow>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="IntProperty">
                      <Value>1</Value>
                    </Combinator>
                  </Expression>
                  <Expression xsi:type="Condition">
                    <Name>No</Name>
                    <Workflow>
                      <Nodes>
                        <Expression xsi:type="WorkflowInput">
                          <Name>Source1</Name>
                        </Expression>
                        <Expression xsi:type="BitwiseNot" />
                        <Expression xsi:type="WorkflowOutput" />
                      </Nodes>
                      <Edges>
                        <Edge From="0" To="1" Label="Source1" />
                        <Edge From="1" To="2" Label="Source1" />
                      </Edges>
                    </Workflow>
                  </Expression>
                  <Expression xsi:type="SelectMany">
                    <Name>Failure - DelayedReward</Name>
                    <Workflow>
                      <Nodes>
                        <Expression xsi:type="WorkflowInput">
                          <Name>Source1</Name>
                        </Expression>
                        <Expression xsi:type="Combinator">
                          <Combinator xsi:type="IntProperty">
                            <Value>1</Value>
                          </Combinator>
                        </Expression>
                        <Expression xsi:type="MulticastSubject">
                          <Name>Attempts</Name>
                        </Expression>
                        <Expression xsi:type="SelectMany">
                          <Name>SecondChance</Name>
                          <Workflow>
                            <Nodes>
                              <Expression xsi:type="SubscribeSubject">
                                <Name>Tone</Name>
                              </Expression>
                              <Expression xsi:type="Condition">
                                <Name>4kHz</Name>
                                <Workflow>
                                  <Nodes>
                                    <Expression xsi:type="WorkflowInput">
                                      <Name>Source1</Name>
                                    </Expression>
                                    <Expression xsi:type="Equal">
                                      <Operand xsi:type="IntProperty">
                                        <Value>4</Value>
                                      </Operand>
                                    </Expression>
                                    <Expression xsi:type="WorkflowOutput" />
                                  </Nodes>
                                  <Edges>
                                    <Edge From="0" To="1" Label="Source1" />
                                    <Edge From="1" To="2" Label="Source1" />
                                  </Edges>
                                </Workflow>
                              </Expression>
                              <Expression xsi:type="SelectMany">
                                <Name>LickLeft</Name>
                                <Workflow>
                                  <Nodes>
                                    <Expression xsi:type="SubscribeSubject">
                                      <Name>Beam1Bool</Name>
                                    </Expression>
                                    <Expression xsi:type="Condition">
                                      <Workflow>
                                        <Nodes>
                                          <Expression xsi:type="WorkflowInput">
                                            <Name>Source1</Name>
                                          </Expression>
                                          <Expression xsi:type="BitwiseNot" />
                                          <Expression xsi:type="WorkflowOutput" />
                                        </Nodes>
                                        <Edges>
                                          <Edge From="0" To="1" Label="Source1" />
                                          <Edge From="1" To="2" Label="Source1" />
                                        </Edges>
                                      </Workflow>
                                    </Expression>
                                    <Expression xsi:type="Sink">
                                      <Name>ResetSpouts</Name>
                                      <Workflow>
                                        <Nodes>
                                          <Expression xsi:type="SubscribeSubject">
                                            <Name>Beam1Bool</Name>
                                          </Expression>
                                          <Expression xsi:type="Condition">
                                            <Workflow>
                                              <Nodes>
                                                <Expression xsi:type="WorkflowInput">
                                                  <Name>Source1</Name>
                                                </Expression>
                                                <Expression xsi:type="BitwiseNot" />
                                                <Expression xsi:type="WorkflowOutput" />
                                              </Nodes>
                                              <Edges>
                                                <Edge From="0" To="1" Label="Source1" />
                                                <Edge From="1" To="2" Label="Source1" />
                                              </Edges>
                                            </Workflow>
                                          </Expression>
                                          <Expression xsi:type="Combinator">
                                            <Combinator xsi:type="BooleanProperty">
                                              <Value>true</Value>
                                            </Combinator>
                                          </Expression>
                                          <Expression xsi:type="MulticastSubject">
                                            <Name>Beam1Bool</Name>
                                          </Expression>
                                          <Expression xsi:type="SubscribeSubject">
                                            <Name>Beam2Bool</Name>
                                          </Expression>
                                          <Expression xsi:type="Condition">
                                            <Workflow>
                                              <Nodes>
                                                <Expression xsi:type="WorkflowInput">
                                                  <Name>Source1</Name>
                                                </Expression>
                                                <Expression xsi:type="BitwiseNot" />
                                                <Expression xsi:type="WorkflowOutput" />
                                              </Nodes>
                                              <Edges>
                                                <Edge From="0" To="1" Label="Source1" />
                                                <Edge From="1" To="2" Label="Source1" />
                                              </Edges>
                                            </Workflow>
                                          </Expression>
                                          <Expression xsi:type="Combinator">
                                            <Combinator xsi:type="BooleanProperty">
                                              <Value>true</Value>
                                            </Combinator>
                                          </Expression>
                                          <Expression xsi:type="MulticastSubject">
                                            <Name>Beam2Bool</Name>
                                          </Expression>
                                        </Nodes>
                                        <Edges>
                                          <Edge From="0" To="1" Label="Source1" />
                                          <Edge From="1" To="2" Label="Source1" />
                                          <Edge From="2" To="3" Label="Source1" />
                                          <Edge From="4" To="5" Label="Source1" />
                                          <Edge From="5" To="6" Label="Source1" />
                                          <Edge From="6" To="7" Label="Source1" />
                                        </Edges>
                                      </Workflow>
                                    </Expression>
                                    <Expression xsi:type="Combinator">
                                      <Combinator xsi:type="BooleanProperty">
                                        <Value>true</Value>
                                      </Combinator>
                                    </Expression>
                                    <Expression xsi:type="Combinator">
                                      <Combinator xsi:type="rx:Take">
                                        <rx:Count>1</rx:Count>
                                      </Combinator>
                                    </Expression>
                                    <Expression xsi:type="WorkflowOutput" />
                                  </Nodes>
                                  <Edges>
                                    <Edge From="0" To="1" Label="Source1" />
                                    <Edge From="1" To="2" Label="Source1" />
                                    <Edge From="2" To="3" Label="Source1" />
                                    <Edge From="3" To="4" Label="Source1" />
                                    <Edge From="4" To="5" Label="Source1" />
                                  </Edges>
                                </Workflow>
                              </Expression>
                              <Expression xsi:type="SelectMany">
                                <Name>CountAttempts</Name>
                                <Workflow>
                                  <Nodes>
                                    <Expression xsi:type="SubscribeSubject">
                                      <Name>Beam2Bool</Name>
                                    </Expression>
                                    <Expression xsi:type="Condition">
                                      <Workflow>
                                        <Nodes>
                                          <Expression xsi:type="WorkflowInput">
                                            <Name>Source1</Name>
                                          </Expression>
                                          <Expression xsi:type="BitwiseNot" />
                                          <Expression xsi:type="WorkflowOutput" />
                                        </Nodes>
                                        <Edges>
                                          <Edge From="0" To="1" Label="Source1" />
                                          <Edge From="1" To="2" Label="Source1" />
                                        </Edges>
                                      </Workflow>
                                    </Expression>
                                    <Expression xsi:type="Combinator">
                                      <Combinator xsi:type="IntProperty">
                                        <Value>0</Value>
                                      </Combinator>
                                    </Expression>
                                    <Expression xsi:type="MulticastSubject">
                                      <Name>Attempts</Name>
                                    </Expression>
                                    <Expression xsi:type="Combinator">
                                      <Combinator xsi:type="IntProperty">
                                        <Value>1</Value>
                                      </Combinator>
                                    </Expression>
                                    <Expression xsi:type="rx:Accumulate" />
                                    <Expression xsi:type="Add">
                                      <Operand xsi:type="IntProperty">
                                        <Value>1</Value>
                                      </Operand>
                                    </Expression>
                                    <Expression xsi:type="MulticastSubject">
                                      <Name>Attempts</Name>
                                    </Expression>
                                    <Expression xsi:type="WorkflowOutput" />
                                  </Nodes>
                                  <Edges>
                                    <Edge From="0" To="1" Label="Source1" />
                                    <Edge From="1" To="2" Label="Source1" />
                                    <Edge From="2" To="3" Label="Source1" />
                                    <Edge From="3" To="4" Label="Source1" />
                                    <Edge From="4" To="5" Label="Source1" />
                                    <Edge From="5" To="6" Label="Source1" />
                                    <Edge From="6" To="7" Label="Source1" />
                                    <Edge From="7" To="8" Label="Source1" />
                                  </Edges>
                                </Workflow>
                              </Expression>
                              <Expression xsi:type="Condition">
                                <Name>16kHz</Name>
                                <Workflow>
                                  <Nodes>
                                    <Expression xsi:type="WorkflowInput">
                                      <Name>Source1</Name>
                                    </Expression>
                                    <Expression xsi:type="Equal">
                                      <Operand xsi:type="IntProperty">
                                        <Value>16</Value>
                                      </Operand>
                                    </Expression>
                                    <Expression xsi:type="WorkflowOutput" />
                                  </Nodes>
                                  <Edges>
                                    <Edge From="0" To="1" Label="Source1" />
                                    <Edge From="1" To="2" Label="Source1" />
                                  </Edges>
                                </Workflow>
                              </Expression>
                              <Expression xsi:type="SelectMany">
                                <Name>LickRight</Name>
                                <Workflow>
                                  <Nodes>
                                    <Expression xsi:type="SubscribeSubject">
                                      <Name>Beam2Bool</Name>
                                    </Expression>
                                    <Expression xsi:type="Condition">
                                      <Workflow>
                                        <Nodes>
                                          <Expression xsi:type="WorkflowInput">
                                            <Name>Source1</Name>
                                          </Expression>
                                          <Expression xsi:type="BitwiseNot" />
                                          <Expression xsi:type="WorkflowOutput" />
                                        </Nodes>
                                        <Edges>
                                          <Edge From="0" To="1" Label="Source1" />
                                          <Edge From="1" To="2" Label="Source1" />
                                        </Edges>
                                      </Workflow>
                                    </Expression>
                                    <Expression xsi:type="Sink">
                                      <Name>ResetSpouts</Name>
                                      <Workflow>
                                        <Nodes>
                                          <Expression xsi:type="SubscribeSubject">
                                            <Name>Beam1Bool</Name>
                                          </Expression>
                                          <Expression xsi:type="Condition">
                                            <Workflow>
                                              <Nodes>
                                                <Expression xsi:type="WorkflowInput">
                                                  <Name>Source1</Name>
                                                </Expression>
                                                <Expression xsi:type="BitwiseNot" />
                                                <Expression xsi:type="WorkflowOutput" />
                                              </Nodes>
                                              <Edges>
                                                <Edge From="0" To="1" Label="Source1" />
                                                <Edge From="1" To="2" Label="Source1" />
                                              </Edges>
                                            </Workflow>
                                          </Expression>
                                          <Expression xsi:type="Combinator">
                                            <Combinator xsi:type="BooleanProperty">
                                              <Value>true</Value>
                                            </Combinator>
                                          </Expression>
                                          <Expression xsi:type="MulticastSubject">
                                            <Name>Beam1Bool</Name>
                                          </Expression>
                                          <Expression xsi:type="SubscribeSubject">
                                            <Name>Beam2Bool</Name>
                                          </Expression>
                                          <Expression xsi:type="Condition">
                                            <Workflow>
                                              <Nodes>
                                                <Expression xsi:type="WorkflowInput">
                                                  <Name>Source1</Name>
                                                </Expression>
                                                <Expression xsi:type="BitwiseNot" />
                                                <Expression xsi:type="WorkflowOutput" />
                                              </Nodes>
                                              <Edges>
                                                <Edge From="0" To="1" Label="Source1" />
                                                <Edge From="1" To="2" Label="Source1" />
                                              </Edges>
                                            </Workflow>
                                          </Expression>
                                          <Expression xsi:type="Combinator">
                                            <Combinator xsi:type="BooleanProperty">
                                              <Value>true</Value>
                                            </Combinator>
                                          </Expression>
                                          <Expression xsi:type="MulticastSubject">
                                            <Name>Beam2Bool</Name>
                                          </Expression>
                                        </Nodes>
                                        <Edges>
                                          <Edge From="0" To="1" Label="Source1" />
                                          <Edge From="1" To="2" Label="Source1" />
                                          <Edge From="2" To="3" Label="Source1" />
                                          <Edge From="4" To="5" Label="Source1" />
                                          <Edge From="5" To="6" Label="Source1" />
                                          <Edge From="6" To="7" Label="Source1" />
                                        </Edges>
                                      </Workflow>
                                    </Expression>
                                    <Expression xsi:type="Combinator">
                                      <Combinator xsi:type="BooleanProperty">
                                        <Value>true</Value>
                                      </Combinator>
                                    </Expression>
                                    <Expression xsi:type="Combinator">
                                      <Combinator xsi:type="rx:Take">
                                        <rx:Count>1</rx:Count>
                                      </Combinator>
                                    </Expression>
                                    <Expression xsi:type="WorkflowOutput" />
                                  </Nodes>
                                  <Edges>
                                    <Edge From="0" To="1" Label="Source1" />
                                    <Edge From="1" To="2" Label="Source1" />
                                    <Edge From="2" To="3" Label="Source1" />
                                    <Edge From="3" To="4" Label="Source1" />
                                    <Edge From="4" To="5" Label="Source1" />
                                  </Edges>
                                </Workflow>
                              </Expression>
                              <Expression xsi:type="Combinator">
                                <Combinator xsi:type="rx:Merge" />
                              </Expression>
                              <Expression xsi:type="WorkflowOutput" />
                              <Expression xsi:type="SelectMany">
                                <Name>CountAttempts</Name>
                                <Workflow>
                                  <Nodes>
                                    <Expression xsi:type="SubscribeSubject">
                                      <Name>Beam1Bool</Name>
                                    </Expression>
                                    <Expression xsi:type="Condition">
                                      <Workflow>
                                        <Nodes>
                                          <Expression xsi:type="WorkflowInput">
                                            <Name>Source1</Name>
                                          </Expression>
                                          <Expression xsi:type="BitwiseNot" />
                                          <Expression xsi:type="WorkflowOutput" />
                                        </Nodes>
                                        <Edges>
                                          <Edge From="0" To="1" Label="Source1" />
                                          <Edge From="1" To="2" Label="Source1" />
                                        </Edges>
                                      </Workflow>
                                    </Expression>
                                    <Expression xsi:type="Combinator">
                                      <Combinator xsi:type="IntProperty">
                                        <Value>0</Value>
                                      </Combinator>
                                    </Expression>
                                    <Expression xsi:type="MulticastSubject">
                                      <Name>Attempts</Name>
                                    </Expression>
                                    <Expression xsi:type="Combinator">
                                      <Combinator xsi:type="IntProperty">
                                        <Value>1</Value>
                                      </Combinator>
                                    </Expression>
                                    <Expression xsi:type="rx:Accumulate" />
                                    <Expression xsi:type="Add">
                                      <Operand xsi:type="IntProperty">
                                        <Value>1</Value>
                                      </Operand>
                                    </Expression>
                                    <Expression xsi:type="MulticastSubject">
                                      <Name>Attempts</Name>
                                    </Expression>
                                    <Expression xsi:type="WorkflowOutput" />
                                  </Nodes>
                                  <Edges>
                                    <Edge From="0" To="1" Label="Source1" />
                                    <Edge From="1" To="2" Label="Source1" />
                                    <Edge From="2" To="3" Label="Source1" />
                                    <Edge From="3" To="4" Label="Source1" />
                                    <Edge From="4" To="5" Label="Source1" />
                                    <Edge From="5" To="6" Label="Source1" />
                                    <Edge From="6" To="7" Label="Source1" />
                                    <Edge From="7" To="8" Label="Source1" />
                                  </Edges>
                                </Workflow>
                              </Expression>
                            </Nodes>
                            <Edges>
                              <Edge From="0" To="1" Label="Source1" />
                              <Edge From="0" To="4" Label="Source1" />
                              <Edge From="1" To="2" Label="Source1" />
                              <Edge From="1" To="3" Label="Source1" />
                              <Edge From="2" To="6" Label="Source1" />
                              <Edge From="4" To="5" Label="Source1" />
                              <Edge From="4" To="8" Label="Source1" />
                              <Edge From="5" To="6" Label="Source2" />
                              <Edge From="6" To="7" Label="Source1" />
                            </Edges>
                          </Workflow>
                        </Expression>
                        <Expression xsi:type="Condition">
                          <Workflow>
                            <Nodes>
                              <Expression xsi:type="WorkflowInput">
                                <Name>Source1</Name>
                              </Expression>
                              <Expression xsi:type="WorkflowOutput" />
                            </Nodes>
                            <Edges>
                              <Edge From="0" To="1" Label="Source1" />
                            </Edges>
                          </Workflow>
                        </Expression>
                        <Expression xsi:type="SelectMany">
                          <Name>DelayedReward</Name>
                          <Workflow>
                            <Nodes>
                              <Expression xsi:type="SubscribeSubject">
                                <Name>RewDelay</Name>
                              </Expression>
                              <Expression xsi:type="PropertyMapping">
                                <PropertyMappings>
                                  <Property Name="DueTime" />
                                </PropertyMappings>
                              </Expression>
                              <Expression xsi:type="SubscribeSubject">
                                <Name>Tone</Name>
                              </Expression>
                              <Expression xsi:type="Condition">
                                <Name>4kHz</Name>
                                <Workflow>
                                  <Nodes>
                                    <Expression xsi:type="WorkflowInput">
                                      <Name>Source1</Name>
                                    </Expression>
                                    <Expression xsi:type="Equal">
                                      <Operand xsi:type="IntProperty">
                                        <Value>4</Value>
                                      </Operand>
                                    </Expression>
                                    <Expression xsi:type="WorkflowOutput" />
                                  </Nodes>
                                  <Edges>
                                    <Edge From="0" To="1" Label="Source1" />
                                    <Edge From="1" To="2" Label="Source1" />
                                  </Edges>
                                </Workflow>
                              </Expression>
                              <Expression xsi:type="Condition">
                                <Name>16kHz</Name>
                                <Workflow>
                                  <Nodes>
                                    <Expression xsi:type="WorkflowInput">
                                      <Name>Source1</Name>
                                    </Expression>
                                    <Expression xsi:type="Equal">
                                      <Operand xsi:type="IntProperty">
                                        <Value>16</Value>
                                      </Operand>
                                    </Expression>
                                    <Expression xsi:type="WorkflowOutput" />
                                  </Nodes>
                                  <Edges>
                                    <Edge From="0" To="1" Label="Source1" />
                                    <Edge From="1" To="2" Label="Source1" />
                                  </Edges>
                                </Workflow>
                              </Expression>
                              <Expression xsi:type="Combinator">
                                <Combinator xsi:type="rx:Delay">
                                  <rx:DueTime>PT2S</rx:DueTime>
                                </Combinator>
                              </Expression>
                              <Expression xsi:type="SelectMany">
                                <Name>RewardRight</Name>
                                <Workflow>
                                  <Nodes>
                                    <Expression xsi:type="WorkflowInput">
                                      <Name>Source1</Name>
                                    </Expression>
                                    <Expression xsi:type="Disable">
                                      <Builder xsi:type="SelectMany">
                                        <Name>RewardTone</Name>
                                        <Description>SoundCard</Description>
                                        <Workflow>
                                          <Nodes>
                                            <Expression xsi:type="SubscribeSubject">
                                              <Name>RewardDur</Name>
                                            </Expression>
                                            <Expression xsi:type="PropertyMapping">
                                              <PropertyMappings>
                                                <Property Name="DueTime" />
                                              </PropertyMappings>
                                            </Expression>
                                            <Expression xsi:type="WorkflowInput">
                                              <Name>Source1</Name>
                                            </Expression>
                                            <Expression xsi:type="ExternalizedMapping">
                                              <Property Name="SoundLevel" />
                                            </Expression>
                                            <Expression xsi:type="Sink">
                                              <Name>SetLevel</Name>
                                              <Workflow>
                                                <Nodes>
                                                  <Expression xsi:type="ExternalizedMapping">
                                                    <Property Name="Value" DisplayName="SoundLevel" />
                                                  </Expression>
                                                  <Expression xsi:type="WorkflowInput">
                                                    <Name>Source1</Name>
                                                  </Expression>
                                                  <Expression xsi:type="Combinator">
                                                    <Combinator xsi:type="IntProperty">
                                                      <Value>80</Value>
                                                    </Combinator>
                                                  </Expression>
                                                  <Expression xsi:type="scr:ExpressionTransform">
                                                    <scr:Expression>(it-107.54)/-0.0764</scr:Expression>
                                                  </Expression>
                                                  <Expression xsi:type="PropertyMapping">
                                                    <PropertyMappings>
                                                      <Property Name="Value" />
                                                    </PropertyMappings>
                                                  </Expression>
                                                  <Expression xsi:type="Combinator">
                                                    <Combinator xsi:type="IntProperty">
                                                      <Value>360</Value>
                                                    </Combinator>
                                                  </Expression>
                                                  <Expression xsi:type="Sink">
                                                    <Name>Left</Name>
                                                    <Workflow>
                                                      <Nodes>
                                                        <Expression xsi:type="WorkflowInput">
                                                          <Name>Source1</Name>
                                                        </Expression>
                                                        <Expression xsi:type="Combinator">
                                                          <Combinator xsi:type="harp:CreateHarpMessage">
                                                            <harp:MessageType>Write</harp:MessageType>
                                                            <harp:Address>34</harp:Address>
                                                            <harp:PayloadType>U16</harp:PayloadType>
                                                            <harp:Payload>0</harp:Payload>
                                                          </Combinator>
                                                        </Expression>
                                                        <Expression xsi:type="MulticastSubject">
                                                          <Name>PlaySound</Name>
                                                        </Expression>
                                                        <Expression xsi:type="WorkflowOutput" />
                                                      </Nodes>
                                                      <Edges>
                                                        <Edge From="0" To="1" Label="Source1" />
                                                        <Edge From="1" To="2" Label="Source1" />
                                                        <Edge From="2" To="3" Label="Source1" />
                                                      </Edges>
                                                    </Workflow>
                                                  </Expression>
                                                  <Expression xsi:type="Sink">
                                                    <Name>Right</Name>
                                                    <Workflow>
                                                      <Nodes>
                                                        <Expression xsi:type="WorkflowInput">
                                                          <Name>Source1</Name>
                                                        </Expression>
                                                        <Expression xsi:type="Combinator">
                                                          <Combinator xsi:type="harp:CreateHarpMessage">
                                                            <harp:MessageType>Write</harp:MessageType>
                                                            <harp:Address>35</harp:Address>
                                                            <harp:PayloadType>U16</harp:PayloadType>
                                                            <harp:Payload>0</harp:Payload>
                                                          </Combinator>
                                                        </Expression>
                                                        <Expression xsi:type="MulticastSubject">
                                                          <Name>PlaySound</Name>
                                                        </Expression>
                                                        <Expression xsi:type="WorkflowOutput" />
                                                      </Nodes>
                                                      <Edges>
                                                        <Edge From="0" To="1" Label="Source1" />
                                                        <Edge From="1" To="2" Label="Source1" />
                                                        <Edge From="2" To="3" Label="Source1" />
                                                      </Edges>
                                                    </Workflow>
                                                  </Expression>
                                                  <Expression xsi:type="WorkflowOutput" />
                                                </Nodes>
                                                <Edges>
                                                  <Edge From="0" To="2" Label="Source2" />
                                                  <Edge From="1" To="2" Label="Source1" />
                                                  <Edge From="2" To="3" Label="Source1" />
                                                  <Edge From="3" To="4" Label="Source1" />
                                                  <Edge From="4" To="5" Label="Source1" />
                                                  <Edge From="5" To="6" Label="Source1" />
                                                  <Edge From="6" To="7" Label="Source1" />
                                                  <Edge From="7" To="8" Label="Source1" />
                                                </Edges>
                                              </Workflow>
                                            </Expression>
                                            <Expression xsi:type="SubscribeSubject">
                                              <Name>RewardID</Name>
                                            </Expression>
                                            <Expression xsi:type="PropertyMapping">
                                              <PropertyMappings>
                                                <Property Name="Value" />
                                              </PropertyMappings>
                                            </Expression>
                                            <Expression xsi:type="Combinator">
                                              <Combinator xsi:type="IntProperty">
                                                <Value>5</Value>
                                              </Combinator>
                                            </Expression>
                                            <Expression xsi:type="Combinator">
                                              <Combinator xsi:type="rx:Take">
                                                <rx:Count>1</rx:Count>
                                              </Combinator>
                                            </Expression>
                                            <Expression xsi:type="MulticastSubject">
                                              <Name>SoundIndex</Name>
                                            </Expression>
                                            <Expression xsi:type="Combinator">
                                              <Combinator xsi:type="rx:Timestamp" />
                                            </Expression>
                                            <Expression xsi:type="MemberSelector">
                                              <Selector>Timestamp.TimeOfDay</Selector>
                                            </Expression>
                                            <Expression xsi:type="MulticastSubject">
                                              <Name>RewardToneTime</Name>
                                            </Expression>
                                            <Expression xsi:type="Combinator">
                                              <Combinator xsi:type="rx:Delay">
                                                <rx:DueTime>PT0.8S</rx:DueTime>
                                              </Combinator>
                                            </Expression>
                                            <Expression xsi:type="WorkflowOutput" />
                                          </Nodes>
                                          <Edges>
                                            <Edge From="0" To="1" Label="Source1" />
                                            <Edge From="1" To="13" Label="Source2" />
                                            <Edge From="2" To="4" Label="Source2" />
                                            <Edge From="3" To="4" Label="Source2" />
                                            <Edge From="4" To="7" Label="Source1" />
                                            <Edge From="5" To="6" Label="Source1" />
                                            <Edge From="6" To="7" Label="Source2" />
                                            <Edge From="7" To="8" Label="Source1" />
                                            <Edge From="8" To="9" Label="Source1" />
                                            <Edge From="9" To="10" Label="Source1" />
                                            <Edge From="10" To="11" Label="Source1" />
                                            <Edge From="11" To="12" Label="Source1" />
                                            <Edge From="12" To="13" Label="Source1" />
                                            <Edge From="13" To="14" Label="Source1" />
                                          </Edges>
                                        </Workflow>
                                      </Builder>
                                    </Expression>
                                    <Expression xsi:type="p1:BehaviorCommand">
                                      <p1:Type>SetOutput</p1:Type>
                                      <p1:Mask>Poke2Valve</p1:Mask>
                                    </Expression>
                                    <Expression xsi:type="MulticastSubject">
                                      <Name>BehModule</Name>
                                    </Expression>
                                    <Expression xsi:type="SubscribeSubject">
                                      <Name>RightValveTime</Name>
                                    </Expression>
                                    <Expression xsi:type="PropertyMapping">
                                      <PropertyMappings>
                                        <Property Name="DueTime" />
                                      </PropertyMappings>
                                    </Expression>
                                    <Expression xsi:type="Combinator">
                                      <Combinator xsi:type="rx:Delay">
                                        <rx:DueTime>PT0.05S</rx:DueTime>
                                      </Combinator>
                                    </Expression>
                                    <Expression xsi:type="p1:BehaviorCommand">
                                      <p1:Type>ClearOutput</p1:Type>
                                      <p1:Mask>Poke2Valve</p1:Mask>
                                    </Expression>
                                    <Expression xsi:type="MulticastSubject">
                                      <Name>BehModule</Name>
                                    </Expression>
                                    <Expression xsi:type="Combinator">
                                      <Combinator xsi:type="IntProperty">
                                        <Value>1</Value>
                                      </Combinator>
                                    </Expression>
                                    <Expression xsi:type="MulticastSubject">
                                      <Name>RewSide </Name>
                                    </Expression>
                                    <Expression xsi:type="WorkflowOutput" />
                                  </Nodes>
                                  <Edges>
                                    <Edge From="0" To="1" Label="Source1" />
                                    <Edge From="1" To="2" Label="Source1" />
                                    <Edge From="2" To="3" Label="Source1" />
                                    <Edge From="3" To="6" Label="Source1" />
                                    <Edge From="4" To="5" Label="Source1" />
                                    <Edge From="5" To="6" Label="Source2" />
                                    <Edge From="6" To="7" Label="Source1" />
                                    <Edge From="7" To="8" Label="Source1" />
                                    <Edge From="8" To="9" Label="Source1" />
                                    <Edge From="9" To="10" Label="Source1" />
                                    <Edge From="10" To="11" Label="Source1" />
                                  </Edges>
                                </Workflow>
                              </Expression>
                              <Expression xsi:type="PropertyMapping">
                                <PropertyMappings>
                                  <Property Name="DueTime" />
                                </PropertyMappings>
                              </Expression>
                              <Expression xsi:type="Combinator">
                                <Combinator xsi:type="rx:Delay">
                                  <rx:DueTime>PT2S</rx:DueTime>
                                </Combinator>
                              </Expression>
                              <Expression xsi:type="SelectMany">
                                <Name>RewardLeft</Name>
                                <Workflow>
                                  <Nodes>
                                    <Expression xsi:type="WorkflowInput">
                                      <Name>Source1</Name>
                                    </Expression>
                                    <Expression xsi:type="Disable">
                                      <Builder xsi:type="SelectMany">
                                        <Name>RewardTone</Name>
                                        <Description>SoundCard</Description>
                                        <Workflow>
                                          <Nodes>
                                            <Expression xsi:type="SubscribeSubject">
                                              <Name>RewardDur</Name>
                                            </Expression>
                                            <Expression xsi:type="PropertyMapping">
                                              <PropertyMappings>
                                                <Property Name="DueTime" />
                                              </PropertyMappings>
                                            </Expression>
                                            <Expression xsi:type="WorkflowInput">
                                              <Name>Source1</Name>
                                            </Expression>
                                            <Expression xsi:type="ExternalizedMapping">
                                              <Property Name="SoundLevel" />
                                            </Expression>
                                            <Expression xsi:type="Sink">
                                              <Name>SetLevel</Name>
                                              <Workflow>
                                                <Nodes>
                                                  <Expression xsi:type="ExternalizedMapping">
                                                    <Property Name="Value" DisplayName="SoundLevel" />
                                                  </Expression>
                                                  <Expression xsi:type="WorkflowInput">
                                                    <Name>Source1</Name>
                                                  </Expression>
                                                  <Expression xsi:type="Combinator">
                                                    <Combinator xsi:type="IntProperty">
                                                      <Value>80</Value>
                                                    </Combinator>
                                                  </Expression>
                                                  <Expression xsi:type="scr:ExpressionTransform">
                                                    <scr:Expression>(it-107.54)/-0.0764</scr:Expression>
                                                  </Expression>
                                                  <Expression xsi:type="PropertyMapping">
                                                    <PropertyMappings>
                                                      <Property Name="Value" />
                                                    </PropertyMappings>
                                                  </Expression>
                                                  <Expression xsi:type="Combinator">
                                                    <Combinator xsi:type="IntProperty">
                                                      <Value>360</Value>
                                                    </Combinator>
                                                  </Expression>
                                                  <Expression xsi:type="Sink">
                                                    <Name>Left</Name>
                                                    <Workflow>
                                                      <Nodes>
                                                        <Expression xsi:type="WorkflowInput">
                                                          <Name>Source1</Name>
                                                        </Expression>
                                                        <Expression xsi:type="Combinator">
                                                          <Combinator xsi:type="harp:CreateHarpMessage">
                                                            <harp:MessageType>Write</harp:MessageType>
                                                            <harp:Address>34</harp:Address>
                                                            <harp:PayloadType>U16</harp:PayloadType>
                                                            <harp:Payload>0</harp:Payload>
                                                          </Combinator>
                                                        </Expression>
                                                        <Expression xsi:type="MulticastSubject">
                                                          <Name>PlaySound</Name>
                                                        </Expression>
                                                        <Expression xsi:type="WorkflowOutput" />
                                                      </Nodes>
                                                      <Edges>
                                                        <Edge From="0" To="1" Label="Source1" />
                                                        <Edge From="1" To="2" Label="Source1" />
                                                        <Edge From="2" To="3" Label="Source1" />
                                                      </Edges>
                                                    </Workflow>
                                                  </Expression>
                                                  <Expression xsi:type="Sink">
                                                    <Name>Right</Name>
                                                    <Workflow>
                                                      <Nodes>
                                                        <Expression xsi:type="WorkflowInput">
                                                          <Name>Source1</Name>
                                                        </Expression>
                                                        <Expression xsi:type="Combinator">
                                                          <Combinator xsi:type="harp:CreateHarpMessage">
                                                            <harp:MessageType>Write</harp:MessageType>
                                                            <harp:Address>35</harp:Address>
                                                            <harp:PayloadType>U16</harp:PayloadType>
                                                            <harp:Payload>0</harp:Payload>
                                                          </Combinator>
                                                        </Expression>
                                                        <Expression xsi:type="MulticastSubject">
                                                          <Name>PlaySound</Name>
                                                        </Expression>
                                                        <Expression xsi:type="WorkflowOutput" />
                                                      </Nodes>
                                                      <Edges>
                                                        <Edge From="0" To="1" Label="Source1" />
                                                        <Edge From="1" To="2" Label="Source1" />
                                                        <Edge From="2" To="3" Label="Source1" />
                                                      </Edges>
                                                    </Workflow>
                                                  </Expression>
                                                  <Expression xsi:type="WorkflowOutput" />
                                                </Nodes>
                                                <Edges>
                                                  <Edge From="0" To="2" Label="Source2" />
                                                  <Edge From="1" To="2" Label="Source1" />
                                                  <Edge From="2" To="3" Label="Source1" />
                                                  <Edge From="3" To="4" Label="Source1" />
                                                  <Edge From="4" To="5" Label="Source1" />
                                                  <Edge From="5" To="6" Label="Source1" />
                                                  <Edge From="6" To="7" Label="Source1" />
                                                  <Edge From="7" To="8" Label="Source1" />
                                                </Edges>
                                              </Workflow>
                                            </Expression>
                                            <Expression xsi:type="SubscribeSubject">
                                              <Name>RewardID</Name>
                                            </Expression>
                                            <Expression xsi:type="PropertyMapping">
                                              <PropertyMappings>
                                                <Property Name="Value" />
                                              </PropertyMappings>
                                            </Expression>
                                            <Expression xsi:type="Combinator">
                                              <Combinator xsi:type="IntProperty">
                                                <Value>5</Value>
                                              </Combinator>
                                            </Expression>
                                            <Expression xsi:type="Combinator">
                                              <Combinator xsi:type="rx:Take">
                                                <rx:Count>1</rx:Count>
                                              </Combinator>
                                            </Expression>
                                            <Expression xsi:type="MulticastSubject">
                                              <Name>SoundIndex</Name>
                                            </Expression>
                                            <Expression xsi:type="Combinator">
                                              <Combinator xsi:type="rx:Timestamp" />
                                            </Expression>
                                            <Expression xsi:type="MemberSelector">
                                              <Selector>Timestamp.TimeOfDay</Selector>
                                            </Expression>
                                            <Expression xsi:type="MulticastSubject">
                                              <Name>RewardToneTime</Name>
                                            </Expression>
                                            <Expression xsi:type="Combinator">
                                              <Combinator xsi:type="rx:Delay">
                                                <rx:DueTime>PT0.8S</rx:DueTime>
                                              </Combinator>
                                            </Expression>
                                            <Expression xsi:type="WorkflowOutput" />
                                          </Nodes>
                                          <Edges>
                                            <Edge From="0" To="1" Label="Source1" />
                                            <Edge From="1" To="13" Label="Source2" />
                                            <Edge From="2" To="4" Label="Source2" />
                                            <Edge From="3" To="4" Label="Source2" />
                                            <Edge From="4" To="7" Label="Source1" />
                                            <Edge From="5" To="6" Label="Source1" />
                                            <Edge From="6" To="7" Label="Source2" />
                                            <Edge From="7" To="8" Label="Source1" />
                                            <Edge From="8" To="9" Label="Source1" />
                                            <Edge From="9" To="10" Label="Source1" />
                                            <Edge From="10" To="11" Label="Source1" />
                                            <Edge From="11" To="12" Label="Source1" />
                                            <Edge From="12" To="13" Label="Source1" />
                                            <Edge From="13" To="14" Label="Source1" />
                                          </Edges>
                                        </Workflow>
                                      </Builder>
                                    </Expression>
                                    <Expression xsi:type="p1:BehaviorCommand">
                                      <p1:Type>SetOutput</p1:Type>
                                      <p1:Mask>Poke1Valve</p1:Mask>
                                    </Expression>
                                    <Expression xsi:type="MulticastSubject">
                                      <Name>BehModule</Name>
                                    </Expression>
                                    <Expression xsi:type="SubscribeSubject">
                                      <Name>LeftValveTime</Name>
                                    </Expression>
                                    <Expression xsi:type="PropertyMapping">
                                      <PropertyMappings>
                                        <Property Name="DueTime" />
                                      </PropertyMappings>
                                    </Expression>
                                    <Expression xsi:type="Combinator">
                                      <Combinator xsi:type="rx:Delay">
                                        <rx:DueTime>PT0.05S</rx:DueTime>
                                      </Combinator>
                                    </Expression>
                                    <Expression xsi:type="p1:BehaviorCommand">
                                      <p1:Type>ClearOutput</p1:Type>
                                      <p1:Mask>Poke1Valve</p1:Mask>
                                    </Expression>
                                    <Expression xsi:type="MulticastSubject">
                                      <Name>BehModule</Name>
                                    </Expression>
                                    <Expression xsi:type="Combinator">
                                      <Combinator xsi:type="IntProperty">
                                        <Value>0</Value>
                                      </Combinator>
                                    </Expression>
                                    <Expression xsi:type="MulticastSubject">
                                      <Name>RewSide </Name>
                                    </Expression>
                                    <Expression xsi:type="WorkflowOutput" />
                                  </Nodes>
                                  <Edges>
                                    <Edge From="0" To="1" Label="Source1" />
                                    <Edge From="1" To="2" Label="Source1" />
                                    <Edge From="2" To="3" Label="Source1" />
                                    <Edge From="3" To="6" Label="Source1" />
                                    <Edge From="4" To="5" Label="Source1" />
                                    <Edge From="5" To="6" Label="Source2" />
                                    <Edge From="6" To="7" Label="Source1" />
                                    <Edge From="7" To="8" Label="Source1" />
                                    <Edge From="8" To="9" Label="Source1" />
                                    <Edge From="9" To="10" Label="Source1" />
                                    <Edge From="10" To="11" Label="Source1" />
                                  </Edges>
                                </Workflow>
                              </Expression>
                              <Expression xsi:type="Combinator">
                                <Combinator xsi:type="rx:Merge" />
                              </Expression>
                              <Expression xsi:type="WorkflowOutput" />
                            </Nodes>
                            <Edges>
                              <Edge From="0" To="1" Label="Source1" />
                              <Edge From="0" To="7" Label="Source1" />
                              <Edge From="1" To="5" Label="Source2" />
                              <Edge From="2" To="3" Label="Source1" />
                              <Edge From="2" To="4" Label="Source1" />
                              <Edge From="3" To="8" Label="Source1" />
                              <Edge From="4" To="5" Label="Source1" />
                              <Edge From="5" To="6" Label="Source1" />
                              <Edge From="6" To="10" Label="Source2" />
                              <Edge From="7" To="8" Label="Source2" />
                              <Edge From="8" To="9" Label="Source1" />
                              <Edge From="9" To="10" Label="Source1" />
                              <Edge From="10" To="11" Label="Source1" />
                            </Edges>
                          </Workflow>
                        </Expression>
                        <Expression xsi:type="WorkflowOutput" />
                      </Nodes>
                      <Edges>
                        <Edge From="0" To="1" Label="Source1" />
                        <Edge From="1" To="2" Label="Source1" />
                        <Edge From="2" To="3" Label="Source1" />
                        <Edge From="3" To="4" Label="Source1" />
                        <Edge From="4" To="5" Label="Source1" />
                        <Edge From="5" To="6" Label="Source1" />
                      </Edges>
                    </Workflow>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="IntProperty">
                      <Value>0</Value>
                    </Combinator>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="rx:Merge" />
                  </Expression>
                  <Expression xsi:type="MulticastSubject">
                    <Name>TrialOutcome</Name>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="rx:Take">
                      <rx:Count>1</rx:Count>
                    </Combinator>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="IntProperty">
                      <Value>1</Value>
                    </Combinator>
                  </Expression>
                  <Expression xsi:type="SubscribeSubject">
                    <Name>RewardCount</Name>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="rx:Zip" />
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="rx:Take">
                      <rx:Count>1</rx:Count>
                    </Combinator>
                  </Expression>
                  <Expression xsi:type="Add" />
                  <Expression xsi:type="MulticastSubject">
                    <Name>RewardCount</Name>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="rx:Zip" />
                  </Expression>
                  <Expression xsi:type="MemberSelector">
                    <Selector>Item1</Selector>
                  </Expression>
                  <Expression xsi:type="WorkflowOutput" />
                </Nodes>
                <Edges>
                  <Edge From="0" To="1" Label="Source1" />
                  <Edge From="0" To="4" Label="Source1" />
                  <Edge From="1" To="2" Label="Source1" />
                  <Edge From="2" To="3" Label="Source1" />
                  <Edge From="3" To="7" Label="Source1" />
                  <Edge From="4" To="5" Label="Source1" />
                  <Edge From="5" To="6" Label="Source1" />
                  <Edge From="6" To="7" Label="Source2" />
                  <Edge From="7" To="8" Label="Source1" />
                  <Edge From="8" To="9" Label="Source1" />
                  <Edge From="8" To="10" Label="Source1" />
                  <Edge From="9" To="16" Label="Source1" />
                  <Edge From="10" To="12" Label="Source1" />
                  <Edge From="11" To="12" Label="Source2" />
                  <Edge From="12" To="13" Label="Source1" />
                  <Edge From="13" To="14" Label="Source1" />
                  <Edge From="14" To="15" Label="Source1" />
                  <Edge From="15" To="16" Label="Source2" />
                  <Edge From="16" To="17" Label="Source1" />
                  <Edge From="17" To="18" Label="Source1" />
                </Edges>
              </Workflow>
            </Expression>
            <Expression xsi:type="Condition">
              <Workflow>
                <Nodes>
                  <Expression xsi:type="WorkflowInput">
                    <Name>Source1</Name>
                  </Expression>
                  <Expression xsi:type="WorkflowOutput" />
                </Nodes>
                <Edges>
                  <Edge From="0" To="1" Label="Source1" />
                </Edges>
              </Workflow>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="IntProperty">
                <Value>-1</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="MulticastSubject">
              <Name>TrialOutcome</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:Merge" />
            </Expression>
            <Expression xsi:type="Sink">
              <Name>IncrementTrial</Name>
              <Workflow>
                <Nodes>
                  <Expression xsi:type="SubscribeSubject">
                    <Name>TrialNumber</Name>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="IntProperty">
                      <Value>1</Value>
                    </Combinator>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="rx:Zip" />
                  </Expression>
                  <Expression xsi:type="Add" />
                  <Expression xsi:type="MulticastSubject">
                    <Name>TrialNumber</Name>
                  </Expression>
                  <Expression xsi:type="WorkflowOutput" />
                </Nodes>
                <Edges>
                  <Edge From="0" To="2" Label="Source1" />
                  <Edge From="1" To="2" Label="Source2" />
                  <Edge From="2" To="3" Label="Source1" />
                  <Edge From="3" To="4" Label="Source1" />
                  <Edge From="4" To="5" Label="Source1" />
                </Edges>
              </Workflow>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:Take">
                <rx:Count>1</rx:Count>
              </Combinator>
            </Expression>
            <Expression xsi:type="WorkflowOutput" />
          </Nodes>
          <Edges>
            <Edge From="0" To="1" Label="Source1" />
            <Edge From="1" To="2" Label="Source1" />
            <Edge From="2" To="3" Label="Source1" />
            <Edge From="2" To="8" Label="Source1" />
            <Edge From="3" To="4" Label="Source1" />
            <Edge From="4" To="5" Label="Source1" />
            <Edge From="5" To="11" Label="Source1" />
            <Edge From="6" To="7" Label="Source1" />
            <Edge From="7" To="8" Label="Source2" />
            <Edge From="8" To="9" Label="Source1" />
            <Edge From="9" To="10" Label="Source1" />
            <Edge From="10" To="11" Label="Source2" />
            <Edge From="11" To="12" Label="Source1" />
            <Edge From="11" To="14" Label="Source1" />
            <Edge From="12" To="13" Label="Source1" />
            <Edge From="13" To="17" Label="Source1" />
            <Edge From="14" To="15" Label="Source1" />
            <Edge From="15" To="16" Label="Source1" />
            <Edge From="16" To="17" Label="Source2" />
            <Edge From="17" To="18" Label="Source1" />
            <Edge From="18" To="19" Label="Source1" />
            <Edge From="19" To="20" Label="Source1" />
          </Edges>
        </Workflow>
      </Expression>
      <Expression xsi:type="Sink">
        <Name>EndTrial</Name>
        <Workflow>
          <Nodes>
            <Expression xsi:type="WorkflowInput">
              <Name>Source1</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="BooleanProperty">
                <Value>true</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="MulticastSubject">
              <Name>TrialEnd</Name>
            </Expression>
            <Expression xsi:type="WorkflowOutput" />
          </Nodes>
          <Edges>
            <Edge From="0" To="1" Label="Source1" />
            <Edge From="1" To="2" Label="Source1" />
            <Edge From="2" To="3" Label="Source1" />
          </Edges>
        </Workflow>
      </Expression>
      <Expression xsi:type="Combinator">
        <Combinator xsi:type="rx:Repeat" />
      </Expression>
      <Expression xsi:type="Combinator">
        <Combinator xsi:type="rx:TakeUntil" />
      </Expression>
      <Expression xsi:type="WorkflowOutput" />
      <Expression xsi:type="ExternalizedMapping">
        <Property Name="Data_Path" />
        <Property Name="Exp_Name" />
        <Property Name="Animal_ID" />
      </Expression>
      <Expression xsi:type="GroupWorkflow">
        <Name>Control_Parameters</Name>
        <Workflow>
          <Nodes>
            <Expression xsi:type="ExternalizedMapping">
              <Property Name="Value" DisplayName="Data_Path" />
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="StringProperty">
                <Value>../../Data</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="ExternalizedMapping">
              <Property Name="Value" DisplayName="Exp_Name" />
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="StringProperty">
                <Value>AUDITORY_DISCRIMINATION_NSI_FULL</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="ExternalizedMapping">
              <Property Name="Value" DisplayName="Animal_ID" />
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="StringProperty">
                <Value>TEST</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="BehaviorSubject">
              <Name>Animal_ID</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="IntProperty">
                <Value>0</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:Timestamp" />
            </Expression>
            <Expression xsi:type="MemberSelector">
              <Selector>Timestamp.DateTime.Year</Selector>
            </Expression>
            <Expression xsi:type="MemberSelector">
              <Selector>Timestamp.DateTime.Month</Selector>
            </Expression>
            <Expression xsi:type="MemberSelector">
              <Selector>Timestamp.Date.Day</Selector>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:Zip" />
            </Expression>
            <Expression xsi:type="scr:ExpressionTransform">
              <scr:Expression>new(
Item1.toString() + "_" + Item2.toString() + "_" + Item3.toString() as date
)</scr:Expression>
            </Expression>
            <Expression xsi:type="MemberSelector">
              <Selector>date</Selector>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:Zip" />
            </Expression>
            <Expression xsi:type="scr:ExpressionTransform">
              <scr:Expression>new(
Item1 + "/" + Item3 + "/" + Item2 +"_"+ Item3 +"_"+ Item4 + "/Trial_Summary.csv" as Trial_Summary_File_Name
)</scr:Expression>
            </Expression>
            <Expression xsi:type="MemberSelector">
              <Selector>Trial_Summary_File_Name</Selector>
            </Expression>
            <Expression xsi:type="BehaviorSubject">
              <Name>Trial_File_Name</Name>
            </Expression>
            <Expression xsi:type="scr:ExpressionTransform">
              <scr:Expression>new(
Item1 + "/" + Item3 + "/" + Item2 +"_"+ Item3 +"_"+ Item4 + "/Detected_Licks.csv" as Licks_File_Name
)</scr:Expression>
            </Expression>
            <Expression xsi:type="MemberSelector">
              <Selector>Licks_File_Name</Selector>
            </Expression>
            <Expression xsi:type="BehaviorSubject">
              <Name>Licks_File_Name</Name>
            </Expression>
          </Nodes>
          <Edges>
            <Edge From="0" To="1" Label="Source1" />
            <Edge From="1" To="15" Label="Source1" />
            <Edge From="2" To="3" Label="Source1" />
            <Edge From="3" To="15" Label="Source2" />
            <Edge From="4" To="5" Label="Source1" />
            <Edge From="5" To="6" Label="Source1" />
            <Edge From="6" To="15" Label="Source3" />
            <Edge From="7" To="8" Label="Source1" />
            <Edge From="8" To="9" Label="Source1" />
            <Edge From="8" To="10" Label="Source1" />
            <Edge From="8" To="11" Label="Source1" />
            <Edge From="9" To="12" Label="Source1" />
            <Edge From="10" To="12" Label="Source2" />
            <Edge From="11" To="12" Label="Source3" />
            <Edge From="12" To="13" Label="Source1" />
            <Edge From="13" To="14" Label="Source1" />
            <Edge From="14" To="15" Label="Source4" />
            <Edge From="15" To="16" Label="Source1" />
            <Edge From="15" To="19" Label="Source1" />
            <Edge From="16" To="17" Label="Source1" />
            <Edge From="17" To="18" Label="Source1" />
            <Edge From="19" To="20" Label="Source1" />
            <Edge From="20" To="21" Label="Source1" />
          </Edges>
        </Workflow>
      </Expression>
      <Expression xsi:type="GroupWorkflow">
        <Name>Count_%_Right_Licks</Name>
        <Description>Calculate rolling average oif correct trials over window of desired size-</Description>
        <Workflow>
          <Nodes>
            <Expression xsi:type="SubscribeSubject">
              <Name>FirstLick</Name>
            </Expression>
            <Expression xsi:type="Condition">
              <Workflow>
                <Nodes>
                  <Expression xsi:type="WorkflowInput">
                    <Name>Source1</Name>
                  </Expression>
                  <Expression xsi:type="Equal">
                    <Operand xsi:type="IntProperty">
                      <Value>4</Value>
                    </Operand>
                  </Expression>
                  <Expression xsi:type="WorkflowOutput" />
                </Nodes>
                <Edges>
                  <Edge From="0" To="1" Label="Source1" />
                  <Edge From="1" To="2" Label="Source1" />
                </Edges>
              </Workflow>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="IntProperty">
                <Value>0</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="Condition">
              <Workflow>
                <Nodes>
                  <Expression xsi:type="WorkflowInput">
                    <Name>Source1</Name>
                  </Expression>
                  <Expression xsi:type="Equal">
                    <Operand xsi:type="IntProperty">
                      <Value>16</Value>
                    </Operand>
                  </Expression>
                  <Expression xsi:type="WorkflowOutput" />
                </Nodes>
                <Edges>
                  <Edge From="0" To="1" Label="Source1" />
                  <Edge From="1" To="2" Label="Source1" />
                </Edges>
              </Workflow>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="IntProperty">
                <Value>1</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:Merge" />
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>Anti_Bias_Window</Name>
            </Expression>
            <Expression xsi:type="PropertyMapping">
              <PropertyMappings>
                <Property Name="Value" />
              </PropertyMappings>
            </Expression>
            <Expression xsi:type="PropertyMapping">
              <PropertyMappings>
                <Property Name="Count" />
              </PropertyMappings>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="dsp:Buffer">
                <dsp:Count>20</dsp:Count>
                <dsp:Skip>1</dsp:Skip>
              </Combinator>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="dsp:Sum" />
            </Expression>
            <Expression xsi:type="MemberSelector">
              <Selector>Val0</Selector>
            </Expression>
            <Expression xsi:type="Divide">
              <Operand xsi:type="DoubleProperty">
                <Value>20</Value>
              </Operand>
            </Expression>
            <Expression xsi:type="MulticastSubject">
              <Name>%_Right_Licks</Name>
            </Expression>
            <Expression xsi:type="WorkflowOutput" />
          </Nodes>
          <Edges>
            <Edge From="0" To="1" Label="Source1" />
            <Edge From="0" To="3" Label="Source1" />
            <Edge From="1" To="2" Label="Source1" />
            <Edge From="2" To="5" Label="Source1" />
            <Edge From="3" To="4" Label="Source1" />
            <Edge From="4" To="5" Label="Source2" />
            <Edge From="5" To="9" Label="Source1" />
            <Edge From="6" To="7" Label="Source1" />
            <Edge From="6" To="8" Label="Source1" />
            <Edge From="7" To="12" Label="Source2" />
            <Edge From="8" To="9" Label="Source2" />
            <Edge From="9" To="10" Label="Source1" />
            <Edge From="10" To="11" Label="Source1" />
            <Edge From="11" To="12" Label="Source1" />
            <Edge From="12" To="13" Label="Source1" />
            <Edge From="13" To="14" Label="Source1" />
          </Edges>
        </Workflow>
      </Expression>
      <Expression xsi:type="GroupWorkflow">
        <Name>Save_Data</Name>
        <Workflow>
          <Nodes>
            <Expression xsi:type="SubscribeSubject">
              <Name>FirstLick</Name>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>TrialOutcome</Name>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>TrialEnd</Name>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>Tone</Name>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>Animal_ID</Name>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>RewSide </Name>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>Attempts</Name>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>ITI</Name>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>TrialNumber</Name>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>AbortTrial</Name>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>Correct</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:CombineLatest" />
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>ResponseWindow</Name>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>GoCueDur</Name>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>CorrectCount</Name>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>RewardCount</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:CombineLatest" />
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:CombineLatest" />
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:Sample" />
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:Timestamp" />
            </Expression>
            <Expression xsi:type="MemberSelector">
              <Selector>Value</Selector>
            </Expression>
            <Expression xsi:type="MemberSelector">
              <Selector>Timestamp.TimeOfDay.TotalSeconds</Selector>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:Zip" />
            </Expression>
            <Expression xsi:type="scr:ExpressionTransform">
              <scr:Expression>new(
Item1.Item1.Item1 as Animal_ID,
Item1.Item1.Item2 as TrialNumber,
Item1.Item1.Item3 as Tone,
Item1.Item1.Item4 as FirstLick,
Item1.Item1.Item5 as Correct,
Item1.Item1.Item6 as Rewside,
Item1.Item1.Item7 as Attempts,
Item1.Item2.Item1 as TrialOutcome,
Item1.Item2.Item2 as AbortTrial,
Item1.Item2.Item3 as CorrectCount,
Item1.Item2.Item4 as RewardCount,
Item1.Item2.Item5 as GoCueDur,
Item1.Item2.Item6 as ITI,
Item1.Item2.Item7 as ReponseWindow,
Item2 as Time
)</scr:Expression>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>Trial_File_Name</Name>
            </Expression>
            <Expression xsi:type="PropertyMapping">
              <PropertyMappings>
                <Property Name="FileName" />
              </PropertyMappings>
            </Expression>
            <Expression xsi:type="io:CsvWriter">
              <io:FileName>../../Data/TEST/AUDITORY_DISCRIMINATION_NSI_FULL_TEST_2022_5_19/Trial_Summary.csv</io:FileName>
              <io:Append>true</io:Append>
              <io:Overwrite>false</io:Overwrite>
              <io:Suffix>Timestamp</io:Suffix>
              <io:IncludeHeader>true</io:IncludeHeader>
            </Expression>
            <Expression xsi:type="WorkflowOutput" />
            <Expression xsi:type="SubscribeSubject">
              <Name>Beam1Bool</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:Timestamp" />
            </Expression>
            <Expression xsi:type="MemberSelector">
              <Selector>Value</Selector>
            </Expression>
            <Expression xsi:type="MemberSelector">
              <Selector>Timestamp.TimeOfDay.TotalSeconds</Selector>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="StringProperty">
                <Value>Beam1Bool</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:Zip" />
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>Beam2Bool</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:Timestamp" />
            </Expression>
            <Expression xsi:type="MemberSelector">
              <Selector>Value</Selector>
            </Expression>
            <Expression xsi:type="MemberSelector">
              <Selector>Timestamp.TimeOfDay.TotalSeconds</Selector>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="StringProperty">
                <Value>Beam2Bool</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:Zip" />
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:Merge" />
            </Expression>
            <Expression xsi:type="scr:ExpressionTransform">
              <scr:Expression>new(
Item1 as State,
Item2 as Time,
Item3 as Spout
)</scr:Expression>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>Licks_File_Name</Name>
            </Expression>
            <Expression xsi:type="PropertyMapping">
              <PropertyMappings>
                <Property Name="FileName" />
              </PropertyMappings>
            </Expression>
            <Expression xsi:type="io:CsvWriter">
              <io:FileName>../../Data/AUDITORY_DISCRIMINATION_NSI_FULL_TEST_2022_5_19/Detected_Licks.csv</io:FileName>
              <io:Delimiter>,</io:Delimiter>
              <io:Append>false</io:Append>
              <io:Overwrite>false</io:Overwrite>
              <io:Suffix>Timestamp</io:Suffix>
              <io:IncludeHeader>true</io:IncludeHeader>
            </Expression>
          </Nodes>
          <Edges>
            <Edge From="0" To="11" Label="Source4" />
            <Edge From="1" To="16" Label="Source1" />
            <Edge From="2" To="18" Label="Source2" />
            <Edge From="3" To="11" Label="Source3" />
            <Edge From="4" To="11" Label="Source1" />
            <Edge From="5" To="11" Label="Source6" />
            <Edge From="6" To="11" Label="Source7" />
            <Edge From="7" To="16" Label="Source6" />
            <Edge From="8" To="11" Label="Source2" />
            <Edge From="9" To="16" Label="Source2" />
            <Edge From="10" To="11" Label="Source5" />
            <Edge From="11" To="17" Label="Source1" />
            <Edge From="12" To="16" Label="Source7" />
            <Edge From="13" To="16" Label="Source5" />
            <Edge From="14" To="16" Label="Source3" />
            <Edge From="15" To="16" Label="Source4" />
            <Edge From="16" To="17" Label="Source2" />
            <Edge From="17" To="18" Label="Source1" />
            <Edge From="18" To="19" Label="Source1" />
            <Edge From="19" To="20" Label="Source1" />
            <Edge From="19" To="21" Label="Source1" />
            <Edge From="20" To="22" Label="Source1" />
            <Edge From="21" To="22" Label="Source2" />
            <Edge From="22" To="23" Label="Source1" />
            <Edge From="23" To="26" Label="Source1" />
            <Edge From="24" To="25" Label="Source1" />
            <Edge From="25" To="26" Label="Source2" />
            <Edge From="26" To="27" Label="Source1" />
            <Edge From="28" To="29" Label="Source1" />
            <Edge From="28" To="32" Label="Source1" />
            <Edge From="29" To="30" Label="Source1" />
            <Edge From="29" To="31" Label="Source1" />
            <Edge From="30" To="33" Label="Source1" />
            <Edge From="31" To="33" Label="Source2" />
            <Edge From="32" To="33" Label="Source3" />
            <Edge From="33" To="40" Label="Source1" />
            <Edge From="34" To="35" Label="Source1" />
            <Edge From="34" To="38" Label="Source1" />
            <Edge From="35" To="36" Label="Source1" />
            <Edge From="35" To="37" Label="Source1" />
            <Edge From="36" To="39" Label="Source1" />
            <Edge From="37" To="39" Label="Source2" />
            <Edge From="38" To="39" Label="Source3" />
            <Edge From="39" To="40" Label="Source2" />
            <Edge From="40" To="41" Label="Source1" />
            <Edge From="41" To="44" Label="Source1" />
            <Edge From="42" To="43" Label="Source1" />
            <Edge From="43" To="44" Label="Source2" />
          </Edges>
        </Workflow>
      </Expression>
      <Expression xsi:type="GroupWorkflow">
        <Name>Performance_Visualizer</Name>
        <Workflow>
          <Nodes>
            <Expression xsi:type="GroupWorkflow">
              <Name>Percent_Correct</Name>
              <Workflow>
                <Nodes>
                  <Expression xsi:type="SubscribeSubject">
                    <Name>CorrectCount</Name>
                  </Expression>
                  <Expression xsi:type="SubscribeSubject">
                    <Name>RewardCount</Name>
                  </Expression>
                  <Expression xsi:type="SubscribeSubject">
                    <Name>Rew_Avg_Window_Size</Name>
                  </Expression>
                  <Expression xsi:type="PropertyMapping">
                    <PropertyMappings>
                      <Property Name="Value" />
                    </PropertyMappings>
                  </Expression>
                  <Expression xsi:type="PropertyMapping">
                    <PropertyMappings>
                      <Property Name="Count" />
                    </PropertyMappings>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="dsp:Buffer">
                      <dsp:Count>20</dsp:Count>
                      <dsp:Skip>1</dsp:Skip>
                    </Combinator>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="dsp:Sum" />
                  </Expression>
                  <Expression xsi:type="MemberSelector">
                    <Selector>Val0</Selector>
                  </Expression>
                  <Expression xsi:type="Divide">
                    <Operand xsi:type="DoubleProperty">
                      <Value>20</Value>
                    </Operand>
                  </Expression>
                  <Expression xsi:type="PropertyMapping">
                    <PropertyMappings>
                      <Property Name="Count" />
                    </PropertyMappings>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="dsp:Buffer">
                      <dsp:Count>20</dsp:Count>
                      <dsp:Skip>1</dsp:Skip>
                    </Combinator>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="dsp:Sum" />
                  </Expression>
                  <Expression xsi:type="MemberSelector">
                    <Selector>Val0</Selector>
                  </Expression>
                  <Expression xsi:type="PropertyMapping">
                    <PropertyMappings>
                      <Property Name="Value" />
                    </PropertyMappings>
                  </Expression>
                  <Expression xsi:type="Divide">
                    <Operand xsi:type="DoubleProperty">
                      <Value>20</Value>
                    </Operand>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="rx:Zip" />
                  </Expression>
                  <Expression xsi:type="MemberSelector">
                    <Selector>Item1</Selector>
                  </Expression>
                  <Expression xsi:type="MemberSelector">
                    <Selector>Item2</Selector>
                  </Expression>
                  <Expression xsi:type="PropertyMapping">
                    <PropertyMappings>
                      <Property Name="Value" />
                    </PropertyMappings>
                  </Expression>
                  <Expression xsi:type="Divide">
                    <Operand xsi:type="DoubleProperty">
                      <Value>123.5</Value>
                    </Operand>
                  </Expression>
                  <Expression xsi:type="WorkflowOutput" />
                </Nodes>
                <Edges>
                  <Edge From="0" To="5" Label="Source1" />
                  <Edge From="1" To="10" Label="Source1" />
                  <Edge From="2" To="3" Label="Source1" />
                  <Edge From="2" To="4" Label="Source1" />
                  <Edge From="2" To="9" Label="Source1" />
                  <Edge From="2" To="13" Label="Source1" />
                  <Edge From="3" To="8" Label="Source2" />
                  <Edge From="4" To="5" Label="Source2" />
                  <Edge From="5" To="6" Label="Source1" />
                  <Edge From="6" To="7" Label="Source1" />
                  <Edge From="7" To="8" Label="Source1" />
                  <Edge From="8" To="15" Label="Source1" />
                  <Edge From="9" To="10" Label="Source2" />
                  <Edge From="10" To="11" Label="Source1" />
                  <Edge From="11" To="12" Label="Source1" />
                  <Edge From="12" To="14" Label="Source1" />
                  <Edge From="13" To="14" Label="Source2" />
                  <Edge From="14" To="15" Label="Source2" />
                  <Edge From="15" To="16" Label="Source1" />
                  <Edge From="15" To="17" Label="Source1" />
                  <Edge From="16" To="19" Label="Source1" />
                  <Edge From="17" To="18" Label="Source1" />
                  <Edge From="18" To="19" Label="Source2" />
                  <Edge From="19" To="20" Label="Source1" />
                </Edges>
              </Workflow>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>AbortTrial</Name>
            </Expression>
          </Nodes>
          <Edges />
        </Workflow>
      </Expression>
    </Nodes>
    <Edges>
      <Edge From="3" To="4" Label="Source1" />
      <Edge From="6" To="14" Label="Source2" />
      <Edge From="7" To="8" Label="Source1" />
      <Edge From="8" To="9" Label="Source1" />
      <Edge From="9" To="10" Label="Source1" />
      <Edge From="10" To="11" Label="Source1" />
      <Edge From="11" To="12" Label="Source1" />
      <Edge From="12" To="13" Label="Source1" />
      <Edge From="13" To="14" Label="Source1" />
      <Edge From="14" To="15" Label="Source1" />
      <Edge From="16" To="17" Label="Source1" />
    </Edges>
  </Workflow>
</WorkflowBuilder>